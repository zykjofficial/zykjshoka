<!-- build time:Wed Oct 07 2020 22:53:33 GMT+0800 (GMT+08:00) --><!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=2"><meta name="theme-color" content="#FFF"><link rel="apple-touch-icon" sizes="180x180" href="//cdn.jsdelivr.net/gh/zykjofficial/zykjshoka@gh-pages/images/apple-touch-icon.png"><link rel="icon" type="image/ico" sizes="32x32" href="//cdn.jsdelivr.net/gh/zykjofficial/zykjshoka@gh-pages/images/favicon.ico"><link rel="mask-icon" href="//cdn.jsdelivr.net/gh/zykjofficial/zykjshoka@gh-pages/images/logo.svg" color=""><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><link rel="alternate" type="application/rss+xml" title="卓越科技-" href="https://shoka.zykjofficial.top/rss.xml"><link rel="alternate" type="application/atom+xml" title="卓越科技-" href="https://shoka.zykjofficial.top/atom.xml"><link rel="alternate" type="application/json" title="卓越科技-" href="https://shoka.zykjofficial.top/feed.json"><link rel="stylesheet" href="//cdn.jsdelivr.net/gh/zykjofficial/zykjshoka@gh-pages/css/app.css?v=0.2.2"><meta name="keywords" content="Nodejs"><link rel="canonical" href="https://shoka.zykjofficial.top/posts/d8fc8ff1/"><title>Nodejs 学习 - Web 教程 | 卓越科技的学习站 = 卓越科技 - = 卓越人生、只为科技。</title><meta name="generator" content="Hexo 5.2.0"></head><body itemscope itemtype="http://schema.org/WebPage"><div id="loading"><div class="cat"><div class="body"></div><div class="head"><div class="face"></div></div><div class="foot"><div class="tummy-end"></div><div class="bottom"></div><div class="legs left"></div><div class="legs right"></div></div><div class="paw"><div class="hands left"></div><div class="hands right"></div></div></div></div><div id="container"><header id="header" itemscope itemtype="http://schema.org/WPHeader"><div class="inner"><div id="brand"><div class="pjax"><h1 itemprop="name headline">Nodejs 学习</h1><div class="meta"><span class="item" title="创建时间：2020-07-06 10:53:26"><span class="icon"><i class="ic i-calendar"></i> </span><span class="text">发表于</span> <time itemprop="dateCreated datePublished" datetime="2020-07-06T10:53:26+08:00">2020-07-06</time> </span><span class="item" title="本文字数"><span class="icon"><i class="ic i-pen"></i> </span><span class="text">本文字数</span> <span>22k</span> <span class="text">字</span> </span><span class="item" title="阅读时长"><span class="icon"><i class="ic i-clock"></i> </span><span class="text">阅读时长</span> <span>20 分钟</span></span></div></div></div><nav id="nav"><div class="inner"><div class="toggle"><div class="lines" aria-label="切换导航栏"><span class="line"></span> <span class="line"></span> <span class="line"></span></div></div><ul class="menu"><li class="item title"><a href="/" rel="start">卓越科技的学习站</a></li></ul><ul class="right"><li class="item theme"><i class="ic i-sun"></i></li><li class="item search"><i class="ic i-search"></i></li></ul></div></nav></div><div id="imgs" class="pjax"><img src="https://cdn.jsdelivr.net/gh/zykjofficial/zykjimg/img/nodejsstudy-cover.png"></div></header><div id="waves"><svg class="waves" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto"><defs><path id="gentle-wave" d="M-160 44c30 0 58-18 88-18s 58 18 88 18 58-18 88-18 58 18 88 18 v44h-352z"/></defs><g class="parallax"><use xlink:href="#gentle-wave" x="48" y="0"/><use xlink:href="#gentle-wave" x="48" y="3"/><use xlink:href="#gentle-wave" x="48" y="5"/><use xlink:href="#gentle-wave" x="48" y="7"/></g></svg></div><main id="main"><div class="inner"><div id="content" class="pjax"><div class="article wrap"><div class="breadcrumb" itemscope itemtype="https://schema.org/BreadcrumbList"><i class="ic i-home"></i> <span><a href="/">首页</a></span><i class="ic i-angle-right"></i> <span class="current" itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem"><a href="/categories/webCourse/" itemprop="item" rel="index" title="分类于 Web 教程"><span itemprop="name">Web 教程</span></a><meta itemprop="position" content="1"></span></div><article itemscope itemtype="http://schema.org/Article" class="post block" lang="zh-CN"><link itemprop="mainEntityOfPage" href="https://shoka.zykjofficial.top/posts/d8fc8ff1/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="//cdn.jsdelivr.net/gh/zykjofficial/zykjshoka@gh-pages/images/avatar.jpg"><meta itemprop="name" content="卓越科技-"><meta itemprop="description" content="卓越人生、只为科技。, Remarkable life,for science and technology."></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="卓越科技 -"></span><div class="body md" itemprop="articleBody"><h2 id="nodejs学习"><a class="卓越科技-" href="#nodejs学习">#</a> Nodejs 学习</h2><div class="note danger"><p>本教程里的资料来源于网友的资料，自己整理以供学习。</p></div><h3 id="nodejs"><a class="卓越科技-" href="#nodejs">#</a> Nodejs</h3><h4 id="什么是nodejs"><a class="卓越科技-" href="#什么是nodejs">#</a> 什么是 Node.js</h4><ol><li>基于谷歌 ChromeV8 引擎的 JS 运行环境 ( <code>不是框架不是库，而是一个可以不通过浏览器而解析JS语言的运行环境</code> )，Node 中只有一些服务器操作级别 API (如文件读写、网络服务构建、网络通信、http 服务器等)，没有 BOM/DOM</li><li>Node 是通过事件驱动、无阻塞输入输出模型而实现轻量和高效的</li><li>Node 生态包 npm 是世界上最大的开源库生态系统</li></ol><h4 id="nodejs可以做什么"><a class="卓越科技-" href="#nodejs可以做什么">#</a> Node.js 可以做什么</h4><ol><li>Web 服务器后台</li><li>命令行工具 (npm、git、hexo)</li><li>游戏服务器</li></ol><h4 id="npm"><a class="卓越科技-" href="#npm">#</a> npm</h4><blockquote><p>(node package manager: node 包管理器)</p></blockquote><div class="note info"><p>package.json (包描述文件)</p></div><p>一个项目最好有一个 package.json 文件，可以保存你在开发过程中安装的包的信息</p><p>在安装包的时候 使用 <code>npm install --save 包名</code> 安装 即会自动将包名添加到 <code>package.json</code> 中，也可以通过 <code>npm init</code> 初始化创建</p><p>如果移植项目，且有 <code>package.json</code> 文件，则可以直接执行 <code>npm install</code> 安装这些包</p><div class="note info"><p>常用命令：</p></div><ul><li><p><code>npm --version</code> 查看版本</p></li><li><p><code>npm install --global npm</code> 升级 npm</p></li><li><p><code>npm init</code> 生成 package.json 包</p></li><li><p><code>npm init -y</code> 省略向导生成 package.json 包</p></li><li><p><code>npm install 包名 (缩写: npm i 包名)</code> 安装包名 (只下载)</p></li><li><p><code>npm install 包名 --save (缩写: npm i-S 包名)</code> 下载并且保存为 package.json 文件中的依赖项</p></li><li><p><code>npm i --save-dev</code> 中的 dev 代表这个包只是暂时使用，上线后即销毁不再使用用，在 packjson 文件里会保存在 <code>devDependencies</code> 项里，当我们转移项目使用 <code>npm install --production</code> 命令安装依赖包时会忽略 <code>devDependencies</code> 里的包</p></li><li><p><code>npm uninstall 包名 (缩写: npm un 包名)</code> 卸载包 (只删除，依旧保留依赖项)</p></li><li><p><code>npm uninstall --save 包名 (缩写: npm un -S 包名)</code> 卸载包，同时删除依赖项</p></li><li><p><code>npm help</code> 查看使用帮助</p></li><li><p><code>npm 命令 --help</code> 查看该命令的使用帮助</p></li></ul><h4 id="如何利用nodejs解析js文件"><a class="卓越科技-" href="#如何利用nodejs解析js文件">#</a> 如何利用 Node.js 解析 js 文件</h4><ol><li><p>创建编写 js 文件</p><figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"Hello world"</span><span class="token punctuation">)</span></pre></td></tr></table></figure></li><li><p>输入 node + 文件名 解析执行</p><p><img data-src="https://cdn.jsdelivr.net/gh/zykjofficial/zykjimg/img/20200705170044.png" alt="20200705170044.png"></p></li></ol><h3 id="原生nodejs"><a class="卓越科技-" href="#原生nodejs">#</a> 原生 Node.js</h3><h4 id="nodejs中的javascript"><a class="卓越科技-" href="#nodejs中的javascript">#</a> Node.js 中的 JavaScript</h4><p>包含四大部分:</p><ol><li>即原本的 ECMAScript</li><li>node 定义的核心模块，包含了很多服务器级别的 API (如 fs、url、http、os 等)</li><li>第三方模块 (通过 npm 下载的模块，如 art-template)</li><li>用户自定义模块 (自己创建的 js 文件)</li></ol><h5 id="模块的加载"><a class="卓越科技-" href="#模块的加载">#</a> 模块的加载</h5><ul><li><p>语法: <code>require(模块名)</code></p></li><li><p>require 的作用:</p><ol><li><p>执行外部模块中的语句</p></li><li><p>拿到被加载文件导出的接口对象 <code>export(即核心模块的原理)</code></p></li></ol></li></ul><figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">// 获取操作系统信息 </span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">var</span> os <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'os'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> </pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token comment">// 操作路径 </span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token keyword">var</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr></table></figure><p><code>require亦可引入自定义模块</code></p><figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./test.js'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr></table></figure><p>注意:</p><ol><li><p>相对路径必须加 <code>./</code></p></li><li><p>可以忽略 <code>后缀名</code></p></li><li><p>node 没有全局作用域，没有文档一说，只有模块作用域，一个 js 文件中的变量函数无法直接被外部引用，想引用只能通过 export 对象</p></li></ol><h5 id="利用require引用其他js文件中的变量函数"><a class="卓越科技-" href="#利用require引用其他js文件中的变量函数">#</a> 利用 require 引用其他 js 文件中的变量函数</h5><blockquote><p>利用接口对象 <code>exports</code> 或者 <code>module.exports</code></p></blockquote><ul><li><p>导出多个变量</p><p><code>exports.变量名 = xxx;</code></p><p><code>module.exports.变量名 = xxx;</code></p><figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">//b.js 中的代码 </span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">var</span> foo <span class="token operator">=</span><span class="token string">'hello'</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">function</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token parameter">x<span class="token punctuation">,</span>y</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> </pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token keyword">return</span> x<span class="token operator">+</span>y<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>exports<span class="token punctuation">.</span>foo <span class="token operator">=</span> foo<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>exports<span class="token punctuation">.</span>add <span class="token operator">=</span> add<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="8"></td><td><pre></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token comment">//a.js 中的代码 </span></pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token keyword">var</span> b <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./b.js'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 返回 b.js 中的 export 对象给 bbianliang </span></pre></td></tr><tr><td data-num="11"></td><td><pre>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>b<span class="token punctuation">.</span>foo <span class="token operator">+</span><span class="token string">' world!'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 输出 hello world!</span></pre></td></tr><tr><td data-num="12"></td><td><pre>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>b<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">'hello'</span><span class="token punctuation">,</span><span class="token string">'world'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 输出 helloworld</span></pre></td></tr></table></figure></li><li><p>如果想直接导出一个变量，则必须用以下形式:</p><p><code>module.exports = 变量</code></p><figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">;</span></pre></td></tr></table></figure><p>这样引入这个模块时就 <code>直接得到一个数组而不用对象的属性获取</code></p></li><li><p>原理：每个模块都有一个 <code>module对象</code> ，里面 <code>存着exports对象</code> ，每个模块最后都默认 <code>返回module.exports</code> ，而直接使用的 exports 是对这个属性的引用，存储的是 module.exports 对象的地址，所以如果直接对 exports 直接赋值是无法改变 module.exports 的值的，只能在根本上改变，即直接改变 module.exports 的值</p></li></ul><h5 id="模块的加载顺序"><a class="卓越科技-" href="#模块的加载顺序">#</a> 模块的加载顺序</h5><p>模块会优先从缓存中加载，例如下面:</p><figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">//main.js </span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./a.js'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> </pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">var</span> fn <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./b.js'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>fn<span class="token punctuation">)</span><span class="token punctuation">;</span> </pre></td></tr><tr><td data-num="5"></td><td><pre></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token comment">//a.js </span></pre></td></tr><tr><td data-num="7"></td><td><pre>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'a.js has been loaded!'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> </pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token keyword">var</span> fn <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./b.js'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>fn<span class="token punctuation">)</span><span class="token punctuation">;</span> </pre></td></tr><tr><td data-num="10"></td><td><pre></pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token comment">//b.js </span></pre></td></tr><tr><td data-num="12"></td><td><pre>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'b.js has been loaded!'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>module<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> </pre></td></tr><tr><td data-num="14"></td><td><pre>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'1'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="15"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><p>结果:</p><pre><code>a.js has been loaded!
b.js has been loaded!
[Function]
[Function]
</code></pre><p>解析：结果不会出现两次 <code>b.js has been loaded!</code> ，因为 a 中已经加载过 b 了，所以不会再次执行，但是还是会取得其中接口对象，这样的优点是避免重复加载，提高效率。</p><h5 id="三种模块的加载原理"><a class="卓越科技-" href="#三种模块的加载原理">#</a> 三种模块的加载原理</h5><blockquote><p>用户自定义模块：如果发现为路径形式的模块，则直接按照路径加载</p></blockquote><p><code>./</code> : 当前目录 (文件操作可以忽略，自定义模块标识符必须有)</p><p><code>../</code> : 上一级目录</p><p><code>/</code> : 当前文件所属磁盘根路径 ( <code>C:/</code> <code>D:/</code> ) 几乎不用</p><br><blockquote><p>核心模块：核心模块的本质也是文件，已经被编译到二进制文件中 按照名字加载即可</p></blockquote><br><blockquote><p>第三方模块：凡是第三方模块都必须通过 npm 来下载，使用的时候通过 <code>require('包名')</code> 的形式加载才可以使用</p></blockquote><p>步骤:</p><ol><li><p>如果判断不是为核心模块也不是路径形式，则会找当前文件所处目录下的 <code>node_module</code> 目录下的同名目录中 <code>package.json</code> 中的 main 属性 main 属性包含了入口模块 然后加载指向的文件</p></li><li><p>如果 <code>package.json</code> 文件不存在或者 main 指定的入口模块也没有 就会自动找目录下的 index.js index.js 为默认备选项</p></li><li><p>如果以上所有都不成立则会进入上一级目录中的 node_module 目录查找</p></li><li><p>如果上一级还没有，则继续往上一级查找 直至报错</p></li></ol><p>注意：一个项目有且只能有一个 <code>node_module</code> 文件夹</p><h4 id="fs文件操作模块"><a class="卓越科技-" href="#fs文件操作模块">#</a> fs 文件操作模块</h4><blockquote><p>Nodejs 有文件操作能力，通过引入文件系统模块，其中包含了各种文件操作 API</p></blockquote><h5 id="读取文件"><a class="卓越科技-" href="#读取文件">#</a> 读取文件</h5><p>步骤:</p><ol><li><p>首先用 <code>require</code> 引入模块，需要什么功能，就引入什么模块，引入模块其实就相当于引入一些相关语法。操控文件则要引入 <code>file-system</code> 模块，用字符串 fs 表示</p><figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">var</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'fs'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr></table></figure></li><li><p>利用 fs 模块的 readFile 方法读取文件</p><p><code>fs模块变量.readFile(文件地址，可选参数[编码格式],回调函数(error，data)&#123;&#125;)</code></p><p>回调函数有两个参数， <code>第一个是读取发生错误时返回的错误对象</code> ， <code>第二个是读取的数据,读取后的数据是二进制代码</code> ，可以在回调函数中将其转为字符串，JS 中的转换成字符串的方法都能实现 <code>toString</code> <code>String + &quot;&quot;</code> 、也可以传入 <code>第二个可选参数进行配置</code> ，读取后的文件会自动按照其值解码。如传入 <code>'utf8'</code> , 则会按照 <code>utf8解码</code></p><figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre>fs<span class="token punctuation">.</span><span class="token function">readFile</span><span class="token punctuation">(</span><span class="token string">'write.txt'</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">error<span class="token punctuation">,</span>data</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>	</pre></td></tr><tr><td data-num="2"></td><td><pre>    <span class="token keyword">if</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> 	</pre></td></tr><tr><td data-num="3"></td><td><pre>        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'读取文件失败'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> </pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span> </pre></td></tr><tr><td data-num="5"></td><td><pre>        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data <span class="token operator">+</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">;</span> </pre></td></tr><tr><td data-num="6"></td><td><pre>    <span class="token punctuation">&#125;</span> </pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> </pre></td></tr><tr><td data-num="8"></td><td><pre></pre></td></tr><tr><td data-num="9"></td><td><pre>fs<span class="token punctuation">.</span><span class="token function">readFile</span><span class="token punctuation">(</span><span class="token string">'write.txt'</span><span class="token punctuation">,</span><span class="token string">'utf8'</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">error<span class="token punctuation">,</span>data</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>	</pre></td></tr><tr><td data-num="10"></td><td><pre>    <span class="token keyword">if</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> 	</pre></td></tr><tr><td data-num="11"></td><td><pre>        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'读取文件失败'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> </pre></td></tr><tr><td data-num="12"></td><td><pre>    <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span> </pre></td></tr><tr><td data-num="13"></td><td><pre>        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="14"></td><td><pre>    <span class="token punctuation">&#125;</span> </pre></td></tr><tr><td data-num="15"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr></table></figure></li></ol><h5 id="写入文件"><a class="卓越科技-" href="#写入文件">#</a> 写入文件</h5><p>步骤:</p><ol><li><p>首先用 require 引入模块，需要什么功能，就引入什么模块，操控文件则要引入 file-system 模块，用字符串 fs 表示</p><figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">var</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'fs'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr></table></figure></li><li><p>使用 fs 模块的 writeFile 方法</p><p><code>fs模块变量.writeFile(文件地址，写入内容，回调函数(error)&#123;&#125;)</code></p><p>回调函数有一个形参 error，用于写入错误时返回错误信息</p><figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre>fs<span class="token punctuation">.</span><span class="token function">writeFile</span><span class="token punctuation">(</span><span class="token string">'./write.txt'</span><span class="token punctuation">,</span><span class="token string">'hello world！！！！！'</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">error</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span> </pre></td></tr><tr><td data-num="2"></td><td><pre>    <span class="token keyword">if</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> 	</pre></td></tr><tr><td data-num="3"></td><td><pre>        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'写入失败'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// console.log(error);</span></pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span> </pre></td></tr><tr><td data-num="5"></td><td><pre>        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'写入成功!'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> </pre></td></tr><tr><td data-num="6"></td><td><pre>    <span class="token punctuation">&#125;</span> </pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr></table></figure></li></ol><h5 id="追加文件"><a class="卓越科技-" href="#追加文件">#</a> 追加文件</h5><p><code>fs.appendFile(文件地址，追加内容，回调函数(error)&#123;&#125;)</code></p><figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre>fs<span class="token punctuation">.</span><span class="token function">appendFile</span><span class="token punctuation">(</span><span class="token string">'t1.txt'</span><span class="token punctuation">,</span><span class="token string">'这是写入的内容'</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span><span class="token operator">=></span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>    <span class="token keyword">if</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>        <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'追加成功'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr></table></figure><h5 id="删除文件"><a class="卓越科技-" href="#删除文件">#</a> 删除文件</h5><p><code>s.unlink(文件地址，回调函数(error)&#123;&#125;)</code></p><figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">//  删除文件</span></pre></td></tr><tr><td data-num="2"></td><td><pre>fs<span class="token punctuation">.</span><span class="token function">unlink</span><span class="token punctuation">(</span><span class="token string">'1.txt'</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span><span class="token operator">=></span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token keyword">if</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>        <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>    <span class="token punctuation">&#125;</span><span class="token keyword">else</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'删除文件成功'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr></table></figure><h5 id="读取文件列表"><a class="卓越科技-" href="#读取文件列表">#</a> 读取文件列表</h5><p>利用 <code>fs模块</code> 变量的 <code>readdir</code> 方法</p><p><code>fs.readdir(路径名，function(error,files) &#123;&#125;)</code></p><p>回调函数的两个参数分别是 <code>错误对象</code> 以及 <code>读取到的文件名列表(数组形式)</code></p><figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre>fs<span class="token punctuation">.</span><span class="token function">readdir</span><span class="token punctuation">(</span><span class="token string">'./read.txt'</span><span class="token punctuation">,</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">error<span class="token punctuation">,</span>files</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> 	</pre></td></tr><tr><td data-num="2"></td><td><pre>    <span class="token keyword">if</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> 		</pre></td></tr><tr><td data-num="3"></td><td><pre>        <span class="token keyword">return</span> res<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token string">'404 can not found'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> </pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token punctuation">&#125;</span>                 </pre></td></tr><tr><td data-num="5"></td><td><pre>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>files<span class="token punctuation">)</span><span class="token punctuation">;</span>   </pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr></table></figure><h4 id="http模块"><a class="卓越科技-" href="#http模块">#</a> Http 模块</h4><blockquote><p>Node.js 中有 http 模块 (字符串 http 表示) 可以快速构建 Web 服务器</p></blockquote><h5 id="步骤"><a class="卓越科技-" href="#步骤">#</a> 步骤</h5><ol><li><p>加载 http 模块</p><figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">var</span> http <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'http'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr></table></figure></li><li><p>利用 <code>http.createServe</code> 创建服务器实例</p><figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">var</span> server <span class="token operator">=</span> http<span class="token punctuation">.</span><span class="token function">createServer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr></table></figure></li><li><p>设置 request 事件，当客户端发送请求时则触发该事件并调用其回调函数</p><p><code>服务器实例.on(&quot;request&quot;,回调函数(request,response)&#123;&#125;)</code></p><p>回调函数中有两个参数 <code>request</code> 和 <code>response</code></p><p><code>request</code></p><ul><li><p><code>req</code> : 它表示一个正在进行的请求，可以获取一些请求信息，比如请求路径</p></li><li><p><code>req.url</code> : 返回请求路径</p></li><li><p><code>req.headers</code> : 打印全部请求头信息 -- 对象形式</p></li><li><p><code>req.method</code> : 请求的方式</p></li></ul><p><code>response</code></p><ul><li><p><code>res</code> : 可以给客户端发送响应信息</p></li><li><p><code>res.setHeader()</code> : 设置响应头，告诉客户端解码方式，如果响应的是 html 页面且 html 页面中元数据 meta 已经声明解码方式则可忽视</p></li><li><p><code>res.statusCode</code> : 设置状态码数字</p></li><li><p><code>res.status.message</code> : 设置状态码文字</p></li><li><p><code>res.write(相应内容)</code> : 向客户端发送响应信息 write 之后必须调用 end 方法用以告诉客户端已经输出完毕、可以有多句 res.write</p></li><li><p><code>res.end(数据)</code> : 完成发送请求 必须跟在 response.write 之后 每个 request 事件只能有一句 <code>res.end</code></p><p>也可以直接通过 <code>response.end</code> 传送数据 <code>response.end(数据)</code> 支持字符串和二进制数据，会直接将二进制转为字符串</p></li></ul><p>可以与 request 的 url 属性搭配使用实现不同请求传递不同信息</p><figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre>server<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">"request"</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">request<span class="token punctuation">,</span>response</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span> </pre></td></tr><tr><td data-num="2"></td><td><pre>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'i got you'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   </pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token keyword">if</span><span class="token punctuation">(</span>request<span class="token punctuation">.</span>url <span class="token operator">==</span> <span class="token string">'/haha'</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> </pre></td></tr><tr><td data-num="4"></td><td><pre>        response<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">'haha'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 如果请求的是 haha 地址，则页面显示 haha    </span></pre></td></tr><tr><td data-num="5"></td><td><pre>        response<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 结束响应</span></pre></td></tr><tr><td data-num="6"></td><td><pre>    <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>  </pre></td></tr><tr><td data-num="7"></td><td><pre>        response<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token string">'please go to /haha'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 如果请求的不是 haha 地址，则会显示左边内容   </span></pre></td></tr><tr><td data-num="8"></td><td><pre>    <span class="token punctuation">&#125;</span> </pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr></table></figure></li></ol><p>也可以传送文件数据</p><figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">if</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span>url <span class="token operator">==</span> <span class="token string">'/html'</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> 	</pre></td></tr><tr><td data-num="2"></td><td><pre>    res<span class="token punctuation">.</span><span class="token function">setHeader</span><span class="token punctuation">(</span><span class="token string">'Content-type'</span><span class="token punctuation">,</span><span class="token string">'text/html;charset=utf-8'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    fs<span class="token punctuation">.</span><span class="token function">readFile</span><span class="token punctuation">(</span><span class="token string">'./resource/index.html'</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">error<span class="token punctuation">,</span>data</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span> 		</pre></td></tr><tr><td data-num="4"></td><td><pre>        <span class="token keyword">if</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> 		</pre></td></tr><tr><td data-num="5"></td><td><pre>            res<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token string">'读取失败!'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 	</pre></td></tr><tr><td data-num="6"></td><td><pre>        <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span> 		</pre></td></tr><tr><td data-num="7"></td><td><pre>            <span class="token comment">//res.end 支持字符串也支持二进制 所以不用转换 	</span></pre></td></tr><tr><td data-num="8"></td><td><pre>            res<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span> 	</pre></td></tr><tr><td data-num="9"></td><td><pre>        <span class="token punctuation">&#125;</span> </pre></td></tr><tr><td data-num="10"></td><td><pre>    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>req<span class="token punctuation">.</span>url <span class="token operator">==</span> <span class="token string">'/plain'</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> </pre></td></tr><tr><td data-num="12"></td><td><pre>    res<span class="token punctuation">.</span><span class="token function">setHeader</span><span class="token punctuation">(</span><span class="token string">'Content-type'</span><span class="token punctuation">,</span><span class="token string">'text/plain;charset=utf-8'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>    fs<span class="token punctuation">.</span><span class="token function">readFile</span><span class="token punctuation">(</span><span class="token string">'./resource/index.txt'</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">error<span class="token punctuation">,</span>data</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span> </pre></td></tr><tr><td data-num="14"></td><td><pre>        <span class="token keyword">if</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> 		</pre></td></tr><tr><td data-num="15"></td><td><pre>            res<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token string">'读取失败!'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 	</pre></td></tr><tr><td data-num="16"></td><td><pre>        <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span> </pre></td></tr><tr><td data-num="17"></td><td><pre>            res<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span> 		</pre></td></tr><tr><td data-num="18"></td><td><pre>        <span class="token punctuation">&#125;</span> </pre></td></tr><tr><td data-num="19"></td><td><pre>    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="20"></td><td><pre><span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>req<span class="token punctuation">.</span>url <span class="token operator">==</span> <span class="token string">'/img'</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> </pre></td></tr><tr><td data-num="21"></td><td><pre>    <span class="token comment">// 图片的 MIME 类型为 image/jpg 一般可以不用设定 </span></pre></td></tr><tr><td data-num="22"></td><td><pre>    res<span class="token punctuation">.</span><span class="token function">setHeader</span><span class="token punctuation">(</span><span class="token string">'Content-type'</span><span class="token punctuation">,</span><span class="token string">'image/jpg;charset=utf-8'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="23"></td><td><pre>    fs<span class="token punctuation">.</span><span class="token function">readFile</span><span class="token punctuation">(</span><span class="token string">'./resource/82710.jpg'</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">error<span class="token punctuation">,</span>data</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span> </pre></td></tr><tr><td data-num="24"></td><td><pre>        <span class="token keyword">if</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> 	</pre></td></tr><tr><td data-num="25"></td><td><pre>            res<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token string">'读取失败！'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> </pre></td></tr><tr><td data-num="26"></td><td><pre>        <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span> 	</pre></td></tr><tr><td data-num="27"></td><td><pre>            res<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span> </pre></td></tr><tr><td data-num="28"></td><td><pre>        <span class="token punctuation">&#125;</span> </pre></td></tr><tr><td data-num="29"></td><td><pre>    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="30"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><p>注意: <code>response.end</code> 方法支持传送二进制数据，所以不用转化获取的文件数据就可以直接发送</p><ol start="4"><li><p>使用 <code>listen方法</code> 绑定端口号，并启动服务器对其监听，启动后调用其回调函数</p><p><code>服务器实例.listen(端口号,回调函数)</code></p><figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre>server<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">3000</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span> </pre></td></tr><tr><td data-num="2"></td><td><pre>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'服务器启动成功 可以通过 http://127.0.0.1:3000 访问'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> </pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 启动成功后，node 环境中则会输出上面语句</span></pre></td></tr></table></figure></li><li><p>在 node 环境中打开该 js 文件，启动服务器 (node 环境中 <code>ctrl+c</code> 可以关闭服务器</p></li></ol><h5 id="http的重定向"><a class="卓越科技-" href="#http的重定向">#</a> http 的重定向</h5><p><code>res.statusCode = 302;</code></p><p><code>res.statusCode</code> : 此属性控制在刷新标头时将发送到客户端的状态代码</p><p><code>res.setHeader('Location',路径)</code></p><p><code>res.end()</code></p><h4 id="url模块"><a class="卓越科技-" href="#url模块">#</a> URL 模块</h4><blockquote><p>url 模块可以对 url 地址进行一些操作</p></blockquote><h5 id="加载模块"><a class="卓越科技-" href="#加载模块">#</a> 加载模块</h5><figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">var</span> url <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'url'</span><span class="token punctuation">)</span></pre></td></tr></table></figure><h5 id="解析地址方法"><a class="卓越科技-" href="#解析地址方法">#</a> 解析地址方法</h5><figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre>url<span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span><span class="token string">'http://www.baidu.com'</span><span class="token punctuation">,</span>布尔值<span class="token punctuation">)</span></pre></td></tr></table></figure><p>返回地址的详细信息</p><p><code>其中第二个参数如果为true，则会将地址中的query参数转为对象，默认为false</code></p><p><img data-src="https://cdn.jsdelivr.net/gh/zykjofficial/zykjimg/img/20200705181137.png" alt="20200705181137.png"></p><p><code>pathname</code> : 返回路径</p><p><code>query</code> : 返回参数</p><h4 id="path模块"><a class="卓越科技-" href="#path模块">#</a> Path 模块</h4><blockquote><p>可以对路径进行操作，注意不是操作 URL</p></blockquote><h5 id="加载方式"><a class="卓越科技-" href="#加载方式">#</a> 加载方式</h5><figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">var</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span></pre></td></tr></table></figure><h5 id="模块方法"><a class="卓越科技-" href="#模块方法">#</a> 模块方法</h5><ul><li><p><code>path.basename(路径)</code> : 获取路径中最后的文件名</p><figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre>path<span class="token punctuation">.</span><span class="token function">basename</span><span class="token punctuation">(</span><span class="token string">'c://a/b/c/index.js'</span><span class="token punctuation">,</span><span class="token string">'.js'</span><span class="token punctuation">)</span> <span class="token comment">// 返回 'index'</span></pre></td></tr></table></figure></li><li><p><code>parse.dirname</code> : 获取路径中的目录部分</p><figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre>path<span class="token punctuation">.</span><span class="token function">dirname</span><span class="token punctuation">(</span><span class="token string">'c://a/b/c/index.js'</span><span class="token punctuation">)</span> <span class="token comment">// 返回 'c://a/b/c'</span></pre></td></tr></table></figure></li><li><p><code>parse.extname</code> : 获取路径中文件的扩展名</p><figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre>path<span class="token punctuation">.</span><span class="token function">extname</span><span class="token punctuation">(</span><span class="token string">'c://a/b/c/index.js'</span><span class="token punctuation">)</span> <span class="token comment">// 返回.js</span></pre></td></tr></table></figure></li><li><p><code>path.join(路径1，路径2)</code> : 将路径拼接起来</p><figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre>path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">'c://a/b/c'</span><span class="token punctuation">,</span><span class="token string">'index.js'</span><span class="token punctuation">)</span> <span class="token comment">// 返回 'c://a/b/c/index.js'</span></pre></td></tr></table></figure></li><li><p><code>path.parse(路径)</code> : 将路径里的元素分别提取出来</p><figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre>path<span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span><span class="token string">'c://a/b/c/index.js'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr></table></figure></li></ul><h4 id="node中的dirname和__filename"><a class="卓越科技-" href="#node中的dirname和__filename">#</a> Node 中的 <code>dirname</code> 和 <code>__filename</code></h4><p>node 中除了 require、exports 等相关模块之外，还有两个特殊的成员</p><ul><li><p><code>__dirname</code> : 可以获取当前文件所属目录的绝对路径</p></li><li><p><code>__filename</code> : 可以获取当前文件的绝对路径</p></li></ul><p>注意:</p><ol><li><p>文件操作中的 <code>./</code> 是相对于执行终端的路径的目录而不是当前文件的目录，如果在别的路径下打开终端执行该文件则会找不到要读取的文件，所以在写文件路径时一般使用 <code>path模块</code> 的 <code>path.join</code> 将 <code>__dirname</code> 和文件拼接起来</p></li><li><p>在大部分文件操作路径中一般都是用绝对路径，而为了防止项目移植时绝对路径失效，所以应该使用动态的绝对路径，也就是 <code>dirname</code> 和 <code>filename</code></p></li><li><p>模块加载中的 <code>./</code> 则不受影响，是相对于当前文件的目录，不需要使用 <code>dirname</code> 和 <code>filename</code></p></li></ol><h4 id="art-template模板引擎模块"><a class="卓越科技-" href="#art-template模板引擎模块">#</a> art-template 模板引擎模块</h4><p>步骤:</p><ol><li><p>加载模板引擎模块并赋予某个变量</p><figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">var</span> template <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'art-template'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr></table></figure><p>注意: <code>下载的模板叫什么名字就加载时就填什么名字</code></p></li><li><p>使用模板引擎的 <code>render</code> 方法</p><p><code>template.render(字符串，填充对象)</code> : 返回的是填充后的字符串</p><p>可以只写第一个参数快速返回一个页面，但是如果页面里有待填充的 script 标签则不能以这种方式发送，因为会被填充掉</p><figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">var</span> ret <span class="token operator">=</span> template<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token string">'hello '</span><span class="token punctuation">,</span><span class="token punctuation">&#123;</span>name<span class="token operator">:</span><span class="token string">'bruce'</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr></table></figure><p>如果要填充的是外部的文件，则读取文件后要记得将其转为字符串</p><figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">var</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'fs'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> </pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">var</span> content <span class="token operator">=</span> <span class="token punctuation">&#123;</span>name<span class="token operator">:</span><span class="token string">'bruce'</span><span class="token punctuation">,</span>age<span class="token operator">:</span><span class="token number">29</span><span class="token punctuation">,</span>province<span class="token operator">:</span><span class="token string">'guangdong'</span><span class="token punctuation">,</span>hobbies<span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">'dance'</span><span class="token punctuation">,</span><span class="token string">'sing'</span><span class="token punctuation">,</span><span class="token string">'rap'</span><span class="token punctuation">,</span><span class="token string">'basketball'</span><span class="token punctuation">]</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre></pre></td></tr><tr><td data-num="4"></td><td><pre>fs<span class="token punctuation">.</span><span class="token function">readFile</span><span class="token punctuation">(</span><span class="token string">'template.html'</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">error<span class="token punctuation">,</span>data</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span> </pre></td></tr><tr><td data-num="5"></td><td><pre>    <span class="token keyword">if</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> 	</pre></td></tr><tr><td data-num="6"></td><td><pre>        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'404 not found'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>    data <span class="token operator">=</span> data<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> </pre></td></tr><tr><td data-num="9"></td><td><pre>    <span class="token keyword">var</span> ret <span class="token operator">=</span> template<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>data<span class="token punctuation">,</span>content<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>ret<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr></table></figure><p>配合 <code>http模块</code> 使用</p><figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">var</span> http <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'http'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> </pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">var</span> server <span class="token operator">=</span> http<span class="token punctuation">.</span><span class="token function">createServer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> </pre></td></tr><tr><td data-num="3"></td><td><pre></pre></td></tr><tr><td data-num="4"></td><td><pre>server<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'request'</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span>res</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> </pre></td></tr><tr><td data-num="5"></td><td><pre>    <span class="token keyword">if</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span>url <span class="token operator">===</span> <span class="token string">'/template'</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> 	</pre></td></tr><tr><td data-num="6"></td><td><pre>        fs<span class="token punctuation">.</span><span class="token function">readFile</span><span class="token punctuation">(</span><span class="token string">'template.html'</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">error<span class="token punctuation">,</span>data</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span> </pre></td></tr><tr><td data-num="7"></td><td><pre>            <span class="token keyword">if</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> 		</pre></td></tr><tr><td data-num="8"></td><td><pre>                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'404 not found'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> </pre></td></tr><tr><td data-num="9"></td><td><pre>            <span class="token punctuation">&#125;</span> 		</pre></td></tr><tr><td data-num="10"></td><td><pre>            data <span class="token operator">=</span> data<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 	</pre></td></tr><tr><td data-num="11"></td><td><pre>            <span class="token keyword">var</span> ret <span class="token operator">=</span> template<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>data<span class="token punctuation">,</span>content<span class="token punctuation">)</span><span class="token punctuation">;</span> 	</pre></td></tr><tr><td data-num="12"></td><td><pre>            res<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span>ret<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="14"></td><td><pre>    <span class="token punctuation">&#125;</span> </pre></td></tr><tr><td data-num="15"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="16"></td><td><pre></pre></td></tr><tr><td data-num="17"></td><td><pre>server<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token string">'3000'</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span> </pre></td></tr><tr><td data-num="18"></td><td><pre>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'running...'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="19"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr></table></figure></li></ol><h4 id="formidable模块实现文件上传"><a class="卓越科技-" href="#formidable模块实现文件上传">#</a> formidable 模块实现文件上传</h4><blockquote><p>利用 formidable 第三方模块可以实现文件的上传</p></blockquote><p>使用步骤:</p><ol><li><p>安装</p><figure class="highlight bash"><figcaption data-lang="bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token function">npm</span> i --S formidable</pre></td></tr></table></figure></li><li><p>加载</p><figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">var</span> formidable <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'formidable'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr></table></figure></li><li><p>路由监听配置</p><ol><li><p>先创建一个 form 对象用以接收文件</p><figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">var</span> form  <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">formidable<span class="token punctuation">.</span>IncomingForm</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr></table></figure></li><li><p>进行配置 (可选)</p><p><code>form.encoding = &quot;utf-8&quot;</code> : 设置文件解码方式</p><p><code>form.uploadDir = __dirname + '/img'</code> : 设置上传文件存放位置</p><p><code>form.keepExtensions = true;</code> : 设置文件是否保留后缀名</p><p><code>form.multiples = true;</code> : 设置是否为多个文件，如果为 true，则 files 参数会以数组显示</p></li><li><p>对文件解析并用回调函数进行操作</p><figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre>form<span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>req<span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span>fields<span class="token punctuation">,</span>files</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><p>文件解析后，文件信息解析完成后会挂载到 req 上，文本的信息将挂载到 fileds 上，文件的信息将挂载到 files 上面 (包括存放的绝对地址、文件大小、文件名字、文件 mime 类型)。</p><figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre>app<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">'/files'</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span>res</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>    <span class="token keyword">var</span> form <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">formidable<span class="token punctuation">.</span>IncomingForm</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    form<span class="token punctuation">.</span>keepExtensions <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>    form<span class="token punctuation">.</span>multiples <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>form<span class="token punctuation">.</span>type<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>    form<span class="token punctuation">.</span>uploadDir <span class="token operator">=</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span><span class="token string">"/img"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>    form<span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>req<span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> fields<span class="token punctuation">,</span> files</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>        res<span class="token punctuation">.</span><span class="token function">setHeader</span><span class="token punctuation">(</span><span class="token string">'Content-type'</span><span class="token punctuation">,</span><span class="token string">'text/plain;charset=utf8'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>        res<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>fields<span class="token punctuation">,</span>files<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="10"></td><td><pre>    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr></table></figure></li></ol></li></ol><h4 id="客户端渲染数据和服务端渲染数据的区别"><a class="卓越科技-" href="#客户端渲染数据和服务端渲染数据的区别">#</a> 客户端渲染数据和服务端渲染数据的区别</h4><ul><li><p>客户端渲染 (SPA:single page application): 用户通过地址栏或者链接标签进入一个新的链接后，向服务器 <code>发出请求</code> ， <code>服务器直接根据链接返回一个html页面(没有数据)</code> ，页面中的 <code>数据渲染则是由页面中的ajax完成</code> ， <code>ajax再次向服务器发出请求数据的请求</code> ，然后 <code>对页面进行渲染</code></p><p>简单理解即浏览器发送页面请求，服务器返回的是一个模板页面，浏览器从上至下解析过程中需要发送 ajax 请求获取数据，最后再调用模板引擎 (art-template 等) 渲染 HTML 结构，并把渲染后的结果添加到页面指定容器中。</p></li><li><p>服务端渲染 (SSR:server side rendering): 用户通过地址栏或者链接进入一个服务器所监听的服务器的路径，服务器则根据 <code>该路径返回一个页面(有数据)</code> ，页面的数据渲染在服务器内由服务器完成， <code>客户端只需要发送一次请求</code> ， <code>不用ajax</code></p><p>以 Node 为例，就是服务器根据请求 <code>req.url</code> 读取对应 html 页面，将其转为字符串，再利用模板引擎将从数据库读取到数据渲染到页面中的某个结构中，再将这个字符串用 <code>res.end()</code> 发送出去</p></li><li><p>如何区分两者？</p></li></ul><p>服务端渲染的页面数据可以通过浏览器审查元素看到。而客户端无法看到。</p><br><ul><li>两者本质的区别？</li></ul><p>客户端渲染和服务器端渲染的最重要的区别就是究竟是谁来完成 html 文件的完整拼接，如果是在服务器端完成的，然后返回给客户端，就是服务器端渲染，而如果是前端做了更多的工作完成了 html 的拼接，则就是客户端渲染。</p><br><ul><li>服务器端渲染的优缺点是？</li></ul><p>优点:</p><ol><li>前端耗时少。因为后端拼接完了 html，浏览器只需要直接渲染出来。</li><li>有利于 SEO。因为在后端有完整的 html 页面，所以爬虫更容易爬取获得信息，更有利于 SEO。</li><li>无需占用客户端资源。即解析模板的工作完全交由后端来做，客户端只要解析标准的 html 页面即可，这样对于客户端的资源占用更少，尤其是移动端，也可以更省电。</li><li>后端生成静态化文件。即生成缓存片段，这样就可以减少数据库查询浪费的时间了，且对于数据变化不大的页面非常高效 。</li></ol><p>缺点:</p><ol><li>不利于前后端分离，开发效率低。使用服务器端渲染，则无法进行分工合作，则对于前端复杂度高的项目，不利于项目高效开发。另外，如果是服务器端渲染，则前端一般就是写一个静态 html 文件，然后后端再修改为模板，这样是非常低效的，并且还常常需要前后端共同完成修改的动作； 或者是前端直接完成 html 模板，然后交由后端。另外，如果后端改了模板，前端还需要根据改动的模板再调节 css，这样使得前后端联调的时间增加。</li><li>占用服务器端资源。即服务器端完成 html 模板的解析，如果请求较多，会对服务器造成一定的访问压力。而如果使用前端渲染，就是把这些解析的压力分摊了前端，而这里确实完全交给了一个服务器。</li></ol><br><ul><li>客户端渲染的优缺点是？</li></ul><p>优点:</p><ol><li>前后端分离。前端专注于前端 UI，后端专注于 api 开发，且前端有更多的选择性，而不需要遵循后端特定的模板。</li><li>体验更好。比如，我们将网站做成 SPA 或者部分内容做成 SPA，这样，尤其是移动端，可以使体验更接近于原生 app。</li></ol><p>缺点:</p><ol><li>前端响应较慢。如果是客户端渲染，前端还要进行拼接字符串的过程，需要耗费额外的时间，不如服务器端渲染速度快。</li><li>不利于 SEO。目前比如百度、谷歌的爬虫对于 SPA 都是不认的，只是记录了一个页面，所以 SEO 很差。因为服务器端可能没有保存完整的 html，而是前端通过 js 进行 dom 的拼接，那么爬虫无法爬取信息。 除非搜索引擎的 seo 可以增加对于 JavaScript 的爬取能力，这才能保证 seo。</li></ol><h3 id="replread-eval-print-loop"><a class="卓越科技-" href="#replread-eval-print-loop">#</a> REPL(read eval print loop)</h3><blockquote><p>代表一个快速的检测 API 的方法</p></blockquote><p>在命令行中输入 node，回车就可以直接执行 js 代码进行一些 node 的 api 的测试</p><h3 id="express框架的使用"><a class="卓越科技-" href="#express框架的使用">#</a> Express 框架的使用</h3><blockquote><p>Express 是一个简洁而灵活的 node.js Web 应用框架，提供了一系列强大特性帮助你创建各种 Web 应用，和丰富的 HTTP 工具。<br>使用 Express 可以快速地搭建一个完整功能的网站。</p></blockquote><ol><li><p>安装</p><figure class="highlight bash"><figcaption data-lang="bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token function">npm</span> <span class="token function">install</span> --save express</pre></td></tr></table></figure></li><li><p>加载包</p><figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">var</span> express <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'express'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr></table></figure></li><li><p>创建服务器</p><p><code>var 变量 = express()</code></p><p>相当于 <code>var server = http.createServer()</code></p><figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">var</span> app <span class="token operator">=</span> <span class="token function">express</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr></table></figure></li><li><p>两种路由</p><ul><li><p>接收 get 方式</p><p><code>app.get(path,function(req,res)&#123;&#125;)</code></p><p>当服务器收到 get 请求路径 <code>path(第一个参数)</code> 的时候，触发事件 相当于 <code>server.on('request',function(req,res))</code> 以及其中地址判断的封装</p><p>第一个参数可以是具体的路径、路径模式、正则表达式的路径模式、以及这三者集合起来的数组</p><figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre>app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/'</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span>res</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>    res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">'hello express!'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   </pre></td></tr><tr><td data-num="3"></td><td><pre>    res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span>query<span class="token punctuation">)</span><span class="token punctuation">;</span> </pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr></table></figure><p>注意：使用 <code>res.send</code> 发送会自动解码不需要设置响应头，可以通过 <code>req.query</code> 属性快速获取 get 方式提交的参数</p></li><li><p>接收 post 方式</p><p><code>app.post(path,function(req,res)&#123;&#125;)</code></p></li></ul></li><li><p>监听</p><p><code>app.listen(端口号，function()&#123;&#125;)</code></p><figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre>app<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">3000</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span> </pre></td></tr><tr><td data-num="2"></td><td><pre>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'app is running at port 3000.'</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr></table></figure></li></ol><h4 id="express的中间件概念"><a class="卓越科技-" href="#express的中间件概念">#</a> express 的中间件概念</h4><p>中间件就是 http 请求和服务器响应之间对请求的处理函数，通过中间件，可以对数据进行操作使得我们能方便地操作请求数据编写服务器响应。如 <code>body-parse中间件</code> 对 post 请求的参数进行处理让我们可以通过 <code>res.body</code> 快速获取请求参数， <code>express-session</code> 中间件可以让我们对数据进行保存， <code>express.static是express内置中间件</code> ，可以让我们快速处理静态资源， <code>express.Router路由中间件</code> 等等</p><p>Express 中，对中间进行了几种分类:</p><ol><li>不关心请求路径和请求方法的中间件，通过 <code>app.use</code> 函数实现</li></ol><p><code>app.use(function(req,res,next)&#123;&#125;)</code></p><p>客户端发起的任意请求都会经过这个中间件函数进行处理</p><p>next 指下一个满足路径条件的中间件，如果有执行 next，那么这个 <code>中间件执行完后就会执行下一个满足条件的中间件</code> ， <code>如果没有next，就会忽略后面所有中间件</code></p><figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre>app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span>res<span class="token punctuation">,</span>next</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> </pre></td></tr><tr><td data-num="2"></td><td><pre>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'1'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token comment">// 满足所有、执行下一个满足条件</span></pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span> </pre></td></tr><tr><td data-num="6"></td><td><pre></pre></td></tr><tr><td data-num="7"></td><td><pre>app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token string">'/a'</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span>res<span class="token punctuation">,</span>next</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> </pre></td></tr><tr><td data-num="8"></td><td><pre>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'aa'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span> </pre></td></tr><tr><td data-num="10"></td><td><pre></pre></td></tr><tr><td data-num="11"></td><td><pre>app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token string">'/b'</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span>res<span class="token punctuation">,</span>next</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> </pre></td></tr><tr><td data-num="12"></td><td><pre>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'bb'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="13"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span> </pre></td></tr><tr><td data-num="14"></td><td><pre></pre></td></tr><tr><td data-num="15"></td><td><pre><span class="token comment">// 输入 /b 路径 结果为 1  bb</span></pre></td></tr></table></figure><ol start="2"><li><p>关心请求路径的中间件，通过 app.use 函数实现</p><p><code>app.use(路径，function(req,res,next)&#123;&#125;)</code></p><p>客户端发起的以第一个参数开头的路径才会进入该中间件</p></li><li><p>严格匹配路径的中间件，通过 <code>app.get/app.post</code> 等实现</p></li></ol><p><code>中间件的执行机制</code></p><ol><li><p>中间件的第一次执行是同步的，当一个请求发出到达服务器后，则按照顺序匹配所有中间件，当找到一个匹配时，则进入该中间件</p></li><li><p>如果该中间件最后没有执行 next 函数，则该请求在此中间件终止，如果有，则会直接进入后面匹配的中间件中 (不是按顺序！)</p></li><li><p>重复 1-2 步</p></li></ol><p>所以，对于一些封装请求数据方便我们操作以及处理静态资源的中间件我们应该放在路由之前编写，否则在编写路由时就无法使用封装好的数据。而对于 404 页面应该放在所有中间件后面，这样无法找到的页面则会返回 404 页面</p><p><code>中间件日志</code></p><p>通过无路径中间件来写入每一次 http 请求到日志中</p><figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre>app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span>res<span class="token punctuation">,</span>next</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>    <span class="token keyword">const</span> log <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">请求方法:</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>req<span class="token punctuation">.</span>method<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">,请求URL:</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>req<span class="token punctuation">.</span>url<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">,请求路径:</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>req<span class="token punctuation">.</span>path<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">,请求时间:</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span> </pre></td></tr><tr><td data-num="3"></td><td><pre>    fs<span class="token punctuation">.</span><span class="token function">appendFile</span><span class="token punctuation">(</span><span class="token string">'./log.txt'</span><span class="token punctuation">,</span>log<span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span> 	</pre></td></tr><tr><td data-num="4"></td><td><pre>        <span class="token keyword">if</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> 	</pre></td></tr><tr><td data-num="5"></td><td><pre>            <span class="token keyword">return</span> res<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token string">'日志写入失败'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>        <span class="token punctuation">&#125;</span> </pre></td></tr><tr><td data-num="7"></td><td><pre>        <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span> </pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr></table></figure><p><code>错误日志中间件</code></p><ol><li><p>利用 <code>try...catch...</code> 捕获路由解析中发生的错误，将其写入错误日志</p><figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre>app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/'</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span>res</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>    <span class="token keyword">try</span> <span class="token punctuation">&#123;</span> </pre></td></tr><tr><td data-num="3"></td><td><pre>        <span class="token keyword">const</span> msg <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span><span class="token string">'abc'</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> </pre></td></tr><tr><td data-num="4"></td><td><pre>        res<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span>msg<span class="token punctuation">)</span><span class="token punctuation">;</span> </pre></td></tr><tr><td data-num="5"></td><td><pre>    <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> 	</pre></td></tr><tr><td data-num="6"></td><td><pre>        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span> </pre></td></tr><tr><td data-num="7"></td><td><pre>    <span class="token punctuation">&#125;</span> </pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr></table></figure><p>访问日志和错误日志都可以写成单独一个中间件保存到数据库中</p></li><li><p>错误收集统一处理中间件</p><p>中间件回调函数参数如果是四个，第一个就是前面中间件中 next 返回的错误对象</p><p>注意：一定要四个参数 才能正确接收错误对象</p><figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre>app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span>req<span class="token punctuation">,</span>res<span class="token punctuation">,</span>next</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>    <span class="token keyword">const</span> error_log <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string"></span></span></pre></td></tr><tr><td data-num="3"></td><td><pre>	错误名:<span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>err<span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string"> </span></pre></td></tr><tr><td data-num="4"></td><td><pre>	错误信息:<span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>err<span class="token punctuation">.</span>message<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string"> </span></pre></td></tr><tr><td data-num="5"></td><td><pre>	错误堆栈:<span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>err<span class="token punctuation">.</span>stack<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string"> </span></pre></td></tr><tr><td data-num="6"></td><td><pre>	错误时间:<span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string"></span></pre></td></tr><tr><td data-num="7"></td><td><pre>	<span class="token template-punctuation string">`</span></pre></td></tr><tr><td data-num="8"></td><td><pre>    fs<span class="token punctuation">.</span><span class="token function">appendFile</span><span class="token punctuation">(</span><span class="token string">'./err_log.txt'</span><span class="token punctuation">,</span>error_log<span class="token punctuation">,</span><span class="token parameter">err</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span> 	</pre></td></tr><tr><td data-num="9"></td><td><pre>        res<span class="token punctuation">.</span><span class="token function">writeHead</span><span class="token punctuation">(</span><span class="token number">500</span><span class="token punctuation">,</span><span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> </pre></td></tr><tr><td data-num="10"></td><td><pre>        res<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token string">'500 服务器正忙，请稍后重试'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> </pre></td></tr><tr><td data-num="11"></td><td><pre>    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span> </pre></td></tr><tr><td data-num="12"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr></table></figure></li></ol><h4 id="express快速处理静态资源使用expressstatic中间件"><a class="卓越科技-" href="#express快速处理静态资源使用expressstatic中间件">#</a> express 快速处理静态资源 (使用 express.static 中间件)</h4><p><code>express.static(root，[选项])</code> : 该 root 参数指定要从其提供静态资产的根目录。该功能通过 <code>req.url</code> 与提供的 root 目录结合来确定要提供的文件。当找不到文件时，它不会发送 404 响应，而是调用 <code>next()</code> 继续前进到下一个中间件，从而允许堆栈和回退。</p><p><code>express.use(以什么路径开头，express.static(公开的资源的目录))</code></p><p>当以 <code>/public开头</code> 时，去路径 <code>./public/</code> 目录中找对应的资源</p><figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre>app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token string">'/public'</span><span class="token punctuation">,</span>express<span class="token punctuation">.</span><span class="token function">static</span><span class="token punctuation">(</span><span class="token string">'./public/'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr></table></figure><p>必须是 <code>/a/public</code> 目录中的资源路径 即以 <code>a代替了public</code></p><figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre>app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token string">'/a/'</span><span class="token punctuation">,</span>express<span class="token punctuation">.</span><span class="token function">static</span><span class="token punctuation">(</span><span class="token string">'./public/'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr></table></figure><p>如果没有第一个参数，则可以通过省略 <code>/public</code> 的方式来访问其中资源 即直接输入其中文件路径名就可以访问 不能添加 public</p><figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre>app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>express<span class="token punctuation">.</span><span class="token function">static</span><span class="token punctuation">(</span><span class="token string">'./public/'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr></table></figure><h4 id="express中模板引擎的使用"><a class="卓越科技-" href="#express中模板引擎的使用">#</a> express 中模板引擎的使用</h4><ol><li><p>安装模块</p><figure class="highlight bash"><figcaption data-lang="bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token function">npm</span> <span class="token function">install</span> --save art-template </pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token function">npm</span> <span class="token function">install</span> --save express-art-template</pre></td></tr></table></figure></li><li><p>配置 (配置该选项之后 <code>res.render</code> 方法就可以用了)</p><p><code>server.engine(ext，回调)</code> : 将给定的模板引擎注册 callback 为 ext。</p><p><code>server.engine(模板文件后缀名，加载express-art--template包)</code></p><figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">var</span> server <span class="token operator">=</span> <span class="token function">express</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> </pre></td></tr><tr><td data-num="2"></td><td><pre>server<span class="token punctuation">.</span><span class="token function">engine</span><span class="token punctuation">(</span><span class="token string">'html'</span><span class="token punctuation">,</span><span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'express-art-template'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr></table></figure></li><li><p>渲染</p><p><code>res.render('模板名',数据对象)</code> : 渲染模板并发送</p><figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre>server<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/'</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span>res</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> </pre></td></tr><tr><td data-num="2"></td><td><pre>    res<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token string">'index.html'</span><span class="token punctuation">,</span><span class="token punctuation">&#123;</span>comments<span class="token operator">:</span>comments<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr></table></figure><p>注意：第一个参数不能写路径 应该直接写文件名 默认会去项目中的 views 目录中查找 文件名必须以配置时第一个参数为后缀</p></li></ol><h4 id="express中的重定向"><a class="卓越科技-" href="#express中的重定向">#</a> express 中的重定向</h4><p><code>res.redirect(路径)</code></p><figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre>server<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/pinglun'</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span>res</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> </pre></td></tr><tr><td data-num="2"></td><td><pre>    req<span class="token punctuation">.</span>query<span class="token punctuation">.</span>dateTime <span class="token operator">=</span> <span class="token string">'2019-10-29'</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    comments<span class="token punctuation">.</span><span class="token function">unshift</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span>query<span class="token punctuation">)</span><span class="token punctuation">;</span> </pre></td></tr><tr><td data-num="4"></td><td><pre>    res<span class="token punctuation">.</span><span class="token function">redirect</span><span class="token punctuation">(</span><span class="token string">'/'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr></table></figure><h4 id="express中的发送文件"><a class="卓越科技-" href="#express中的发送文件">#</a> express 中的发送文件</h4><p><code>res.sendFile(absolutePath)</code> : 路径必须为绝对路径</p><figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre>server<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/'</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span>res</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>    <span class="token comment">//</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    res<span class="token punctuation">.</span><span class="token function">sendfile</span><span class="token punctuation">(</span><span class="token string">'public/index1.html'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> </pre></td></tr><tr><td data-num="4"></td><td><pre>    </pre></td></tr><tr><td data-num="5"></td><td><pre>	<span class="token comment">// 等同于效果</span></pre></td></tr><tr><td data-num="6"></td><td><pre>	res<span class="token punctuation">.</span><span class="token function">sendFile</span><span class="token punctuation">(</span>path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'../public'</span><span class="token punctuation">,</span> <span class="token string">'index1.html'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="7"></td><td><pre></pre></td></tr><tr><td data-num="8"></td><td><pre>	<span class="token comment">// 第三种写法</span></pre></td></tr><tr><td data-num="9"></td><td><pre>	res<span class="token punctuation">.</span><span class="token function">sendFile</span><span class="token punctuation">(</span><span class="token string">'index1.html'</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span> root<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'../public'</span><span class="token punctuation">)</span> <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr></table></figure><h4 id="express中读取post主体reqquery只能获取get方式的数据"><a class="卓越科技-" href="#express中读取post主体reqquery只能获取get方式的数据">#</a> express 中读取 post 主体 (req.query 只能获取 get 方式的数据)</h4><ol><li><p>安装</p><p>下载 <code>body-parser</code> 中间件</p><figure class="highlight bash"><figcaption data-lang="bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token function">npm</span> <span class="token function">install</span> body-parser</pre></td></tr></table></figure></li><li><p>加载</p><figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">var</span> bodyparser <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'body-parser'</span><span class="token punctuation">)</span></pre></td></tr></table></figure></li><li><p>配置</p><p>接收两种格式的数据</p><p><code>app.use(bodyparser.urlencoded())</code></p><p><code>app.use(bodyparser.json())</code></p></li><li><p>使用</p><p>在路由中用 res 的属性 body 获取即可 (返回对象)</p><p><code>res.body</code></p><figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre>app<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">'/pinglun'</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span>res</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span> </pre></td></tr><tr><td data-num="2"></td><td><pre>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>body<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr></table></figure></li></ol><h4 id="express中的router中间件"><a class="卓越科技-" href="#express中的router中间件">#</a> express 中的 router 中间件</h4><p>在 express 中可以通过 express 最高级对象的 <code>Router方法</code> 生成一个 router 对象，router 对象是一个隔离的中间价，不属于任何 http 对象，可以对其进行路由配置 (get/post 等)。可以通过 <code>app.use(router对象)</code> 将其作为一个应用赋予 http 对象</p><figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">var</span> express <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'express'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> </pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">var</span> router <span class="token operator">=</span> express<span class="token punctuation">.</span><span class="token function">Router</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> </pre></td></tr><tr><td data-num="3"></td><td><pre>router<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/students/new'</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span>res</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>    res<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token string">'new.html'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span> </pre></td></tr><tr><td data-num="6"></td><td><pre>app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>router<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr></table></figure><p>该特性可以让我们进行模块化开发，将入口文件和路由文件分开，路由文件将创建好的 router 对象通过 exports.module 导出，入口文件加载路有文件获取并使用 use 函数即可</p><h4 id="express中的session中间件"><a class="卓越科技-" href="#express中的session中间件">#</a> express 中的 session 中间件</h4><p>session 就是会话 **，<strong>会话是一个比连接粒度更大的概念</strong>，** 一次会话可能包含多次连接，每次连接都被认为是会话的一次操作。</p><p>session 的技术实现上：会对每一次对话产生一个唯一的标识 id 进行标识。将数据存在该 id 下就可以实现状态的保存</p><p>session 生命周期：当用户在 Web 页面之间跳转时，存储在 Session 对象中的变量将不会丢失，而是在整个用户会话中一直存在下去，如果会话关掉 (客户端关掉)，那么就消失</p><p>当用户请求来自应用程序的 Web 页面时，如果该用户还没有会话，则 Web 服务器将自动创建一个 Session 对象。当会话过期或被放弃后，服务器将终止该会话。在 Exrpess 中，默认不支持 Session 和 Cookie，可以使用第三方中间件: express-session 来解决</p><p>步骤:</p><ol><li><p>安装</p><figure class="highlight bash"><figcaption data-lang="bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token function">npm</span> <span class="token function">install</span> express-session</pre></td></tr></table></figure></li><li><p>配置 一定要在 app.use (router) 之前</p><figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre>app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token function">session</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span> </pre></td></tr><tr><td data-num="2"></td><td><pre>    secret<span class="token operator">:</span><span class="token string">'keyboard cat'</span><span class="token punctuation">,</span> <span class="token comment">// 配置加密字符串，会在原有加密基础上和这个字符串拼接起来加密，增加安全性 </span></pre></td></tr><tr><td data-num="3"></td><td><pre>    resave<span class="token operator">:</span><span class="token boolean">false</span><span class="token punctuation">,</span> </pre></td></tr><tr><td data-num="4"></td><td><pre>    saveUninitialized<span class="token operator">:</span><span class="token boolean">true</span> <span class="token comment">// 无论是否使用 session 都默认给客户端一把钥匙</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">)</span></pre></td></tr></table></figure></li><li><p>使用</p><p>可以通过 <code>req.session</code> 来访问和设置 Session 数据</p><p>添加 Session 数据: <code>req.session.foo = 'bar'</code></p><p>访问 Session 数据: <code>req.session.foo</code></p></li></ol><h3 id="插件说明"><a class="卓越科技-" href="#插件说明">#</a> 插件说明</h3><blockquote><p>Nodemon 插件：可以自动重启服务器，不用每次修改 js 后手动重启</p></blockquote><p>安装：</p><figure class="highlight bash"><figcaption data-lang="bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token function">npm</span> <span class="token function">install</span> --save-dev nodemon</pre></td></tr></table></figure><p>使用:</p><figure class="highlight bash"><figcaption data-lang="bash"></figcaption><table><tr><td data-num="1"></td><td><pre>nodemon 文件.js</pre></td></tr></table></figure><h3 id="node中使用mongodb数据库"><a class="卓越科技-" href="#node中使用mongodb数据库">#</a> Node 中使用 MongoDB 数据库</h3><blockquote><p>可以使用官方的 mongdb 包来操作，也可以使用第三方 mongoose 包</p></blockquote><h4 id="mongodb的数据结构"><a class="卓越科技-" href="#mongodb的数据结构">#</a> MongoDB 的数据结构</h4><p>可以如下面理解:</p><pre><code>一个数据库test:&#123;

	test里的一个集合:cat&#123;

		cat集合里的一条文档:&#123;name: 'Zildjian'&#125;;

	&#125;

&#125;
</code></pre><p>下面以 mongoose 为例</p><h4 id="创建集合"><a class="卓越科技-" href="#创建集合">#</a> 创建集合</h4><ol><li><p>加载包</p><p><code>变量名 = require('mongoose');</code></p><figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">const</span> mongoose <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'mongoose'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr></table></figure></li><li><p>连接到一个数据库</p><p><code>mongoose.connect(mongodb://域名/数据库名)</code></p><figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre>mongoose<span class="token punctuation">.</span><span class="token function">connect</span><span class="token punctuation">(</span><span class="token string">'mongodb://localhost/zykj'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr></table></figure></li><li><p>设计集合结构</p><ul><li><p>获取一个 Schema 构造函数用以创建结构对象</p><p><code>变量名 = mongoose.Schema</code></p><figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">var</span> Schema <span class="token operator">=</span> mongoose<span class="token punctuation">.</span>Schema<span class="token punctuation">;</span></pre></td></tr></table></figure></li><li><p>构造结构</p><p><code>var 结构名 = new Schema(文档结构)</code></p><figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">var</span> blogSchema <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Schema</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span> title<span class="token operator">:</span> String<span class="token punctuation">,</span> author<span class="token operator">:</span>String<span class="token punctuation">,</span> body<span class="token operator">:</span>String <span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr></table></figure><p>即创建了一个名为 blogSchema 的文档结构</p></li></ul></li><li><p>发布模型 (创建一个集合对象)</p><p><code>mongoose.model</code> : 将一个架构发布为 model 也就是创建了一个集合， <code>第一个参数为集合的名字</code> ， <code>第二个参数为这个新建集合存储的文档的格式(大写会转为小写，在后面会加s) 返回一个构造函数</code></p><figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">var</span> User <span class="token operator">=</span> mongoose<span class="token punctuation">.</span><span class="token function">model</span><span class="token punctuation">(</span><span class="token string">'User'</span><span class="token punctuation">,</span>blogSchema<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr></table></figure><p>返回一个构造函数用以创建新文档，此时数据库中已有名为 users 的集合，该集合的文档结构就是 blogSchema 的对象的结构，但还没有数据</p></li></ol><h4 id="数据操作"><a class="卓越科技-" href="#数据操作">#</a> 数据操作</h4><ol><li><p>新增数据</p><p>new 创建一个模型的实例对象即可，数据结构按照设置好的 Schema 模板来</p><figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">var</span> art1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span> title<span class="token operator">:</span><span class="token string">'how to kill you'</span><span class="token punctuation">,</span> author<span class="token operator">:</span><span class="token string">'bruce chen'</span><span class="token punctuation">,</span> body<span class="token operator">:</span><span class="token string">'just use fucking pencil!'</span> <span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr></table></figure><p>持久化存储：将创建好的 User 对象调用 <code>save</code> 方法即可 可传入回调函数</p><figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre>art1<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> 	</pre></td></tr><tr><td data-num="2"></td><td><pre>   <span class="token keyword">if</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> 		</pre></td></tr><tr><td data-num="3"></td><td><pre>       console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>   <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span> </pre></td></tr><tr><td data-num="5"></td><td><pre>       console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'保存成功!'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> </pre></td></tr><tr><td data-num="6"></td><td><pre>   <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr></table></figure></li><li><p>查询数据</p><ul><li><p>查询全部</p><p>调用模型对象的 <code>find</code> 方法：参数为回调函数，函数的参数 <code>第一个是错误对象</code> ， <code>第二个查询结果</code> 结果都包裹在数组中</p><p><code>User.find(function(err,data)&#123;&#125;)</code></p><figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre>User<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span>data</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> </pre></td></tr><tr><td data-num="2"></td><td><pre>    <span class="token keyword">if</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> </pre></td></tr><tr><td data-num="3"></td><td><pre>        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr></table></figure></li><li><p>按条件查询</p><p>依旧是 find 方法: <code>第一个参数是数组形式的查询条件</code> ， <code>第二个为查询完成后的回调函数,返回数组形式</code> ，返回多个符合条件的文档</p><p><code>User.find(&#123;条件&#125;,function(err,data)&#123;&#125;)</code></p><figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre>User<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>author<span class="token operator">:</span><span class="token string">'bruce huang'</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span>data</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> </pre></td></tr><tr><td data-num="2"></td><td><pre>    <span class="token keyword">if</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> </pre></td></tr><tr><td data-num="3"></td><td><pre>        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span> </pre></td></tr><tr><td data-num="5"></td><td><pre>        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>    <span class="token punctuation">&#125;</span> </pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr></table></figure></li><li><p>查找符合条件的第一个</p><p><code>findOne方法</code> ：按照条件查找第一个符合条件的文档 返回对象形式</p><p><code>User.findOne(&#123;条件&#125;,function(err,data)&#123;&#125;)</code></p><figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre>User<span class="token punctuation">.</span><span class="token function">findOne</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>author<span class="token operator">:</span><span class="token string">'bruce huang'</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span>data</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> </pre></td></tr><tr><td data-num="2"></td><td><pre>    <span class="token keyword">if</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> 	</pre></td></tr><tr><td data-num="3"></td><td><pre>        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span> 	</pre></td></tr><tr><td data-num="5"></td><td><pre>        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>    <span class="token punctuation">&#125;</span> </pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr></table></figure><p>注意：用 find 方法查找数据时，即使数据为空，也会返回一个空数组，所以判定应当判定长度而不是变量</p></li></ul></li><li><p>删除数据</p><p>利用模型的 remove 方法</p><p><code>User.remove(条件,回调函数(错误对象，返回结果))</code></p><figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre>User<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>author<span class="token operator">:</span><span class="token string">'bruce huang'</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span>data</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> </pre></td></tr><tr><td data-num="2"></td><td><pre>    <span class="token keyword">if</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> </pre></td></tr><tr><td data-num="3"></td><td><pre>        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span> </pre></td></tr><tr><td data-num="5"></td><td><pre>        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span> </pre></td></tr><tr><td data-num="6"></td><td><pre>    <span class="token punctuation">&#125;</span> </pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr></table></figure></li><li><p>更改数据</p><p>利用模型对象的</p><p><code>User.findByIdAndUpdate(id值，修改的值(对象形式),回调函数)</code></p><figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre>User<span class="token punctuation">.</span><span class="token function">findByIdAndUpdate</span><span class="token punctuation">(</span><span class="token string">'5dc5583de916d516a8577746'</span><span class="token punctuation">,</span><span class="token punctuation">&#123;</span><span class="token string">'body'</span><span class="token operator">:</span><span class="token string">'not pencil'</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span>data</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> </pre></td></tr><tr><td data-num="2"></td><td><pre>    <span class="token keyword">if</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> </pre></td></tr><tr><td data-num="3"></td><td><pre>        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span> </pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span> 	</pre></td></tr><tr><td data-num="5"></td><td><pre>        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span> </pre></td></tr><tr><td data-num="6"></td><td><pre>    <span class="token punctuation">&#125;</span> </pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr></table></figure><p>注意：当用数据库读取到的_id 数据渲染页面时，页面中应该写成 id，不要写_id</p></li><li><p>分段读取数据</p><p><code>mongoose.find().skip(n).limit(n).exec((err,data) =&gt; &#123;&#125;)</code></p><ul><li><p><code>skip(n)</code> : 代表跳过 n 条数据</p></li><li><p><code>limit(n)</code> : 代表只读取 n 条数据</p></li><li><p>exec 回调函数的第二个参数 data 代表读取到的内容</p></li></ul><p>一般用于页面分页的处理，可以配合 <code>twb-pagination</code> 使用</p></li></ol><h4 id="关于异步编程回调地狱-promise"><a class="卓越科技-" href="#关于异步编程回调地狱-promise">#</a> 关于异步编程 (回调地狱、promise)</h4><blockquote><p>什么是回调地狱？</p><p>当有多个异步事件时，其输出结果顺序是不定的，一般取决于文件大小。如下面代码</p></blockquote><figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre>fs<span class="token punctuation">.</span><span class="token function">readFile</span><span class="token punctuation">(</span><span class="token string">'./data/a.txt'</span><span class="token punctuation">,</span><span class="token string">'utf8'</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span>data</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> </pre></td></tr><tr><td data-num="2"></td><td><pre>    <span class="token keyword">if</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> </pre></td></tr><tr><td data-num="3"></td><td><pre>        <span class="token comment">// return </span></pre></td></tr><tr><td data-num="4"></td><td><pre>        res<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token string">'failed'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 	</pre></td></tr><tr><td data-num="5"></td><td><pre>        <span class="token keyword">throw</span> err<span class="token punctuation">;</span> </pre></td></tr><tr><td data-num="6"></td><td><pre>    <span class="token punctuation">&#125;</span> </pre></td></tr><tr><td data-num="7"></td><td><pre>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span> </pre></td></tr><tr><td data-num="9"></td><td><pre></pre></td></tr><tr><td data-num="10"></td><td><pre>fs<span class="token punctuation">.</span><span class="token function">readFile</span><span class="token punctuation">(</span><span class="token string">'./data/b.txt'</span><span class="token punctuation">,</span><span class="token string">'utf8'</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span>data</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> </pre></td></tr><tr><td data-num="11"></td><td><pre>    <span class="token keyword">if</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> </pre></td></tr><tr><td data-num="12"></td><td><pre>        <span class="token comment">// return </span></pre></td></tr><tr><td data-num="13"></td><td><pre>        res<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token string">'failed'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> </pre></td></tr><tr><td data-num="14"></td><td><pre>        <span class="token keyword">throw</span> err<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="15"></td><td><pre>    <span class="token punctuation">&#125;</span> </pre></td></tr><tr><td data-num="16"></td><td><pre>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="17"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr></table></figure><p>所以为了让事件按照我们想要的顺序生成结果，我们可以将后执行的事件嵌入先执行的事件的回调函数里，如下面代码</p><figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre>fs<span class="token punctuation">.</span><span class="token function">readFile</span><span class="token punctuation">(</span><span class="token string">'./data/c.txt'</span><span class="token punctuation">,</span><span class="token string">'utf8'</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span>data</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>    <span class="token keyword">if</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> </pre></td></tr><tr><td data-num="3"></td><td><pre>        <span class="token comment">// return </span></pre></td></tr><tr><td data-num="4"></td><td><pre>        res<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token string">'failed'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>        <span class="token keyword">throw</span> err<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>    fs<span class="token punctuation">.</span><span class="token function">readFile</span><span class="token punctuation">(</span><span class="token string">'./data/b.txt'</span><span class="token punctuation">,</span><span class="token string">'utf8'</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span>data</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> </pre></td></tr><tr><td data-num="9"></td><td><pre>        <span class="token keyword">if</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> </pre></td></tr><tr><td data-num="10"></td><td><pre>            <span class="token comment">// return </span></pre></td></tr><tr><td data-num="11"></td><td><pre>            res<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token string">'failed'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> </pre></td></tr><tr><td data-num="12"></td><td><pre>            <span class="token keyword">throw</span> err<span class="token punctuation">;</span> </pre></td></tr><tr><td data-num="13"></td><td><pre>        <span class="token punctuation">&#125;</span> </pre></td></tr><tr><td data-num="14"></td><td><pre>        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span> </pre></td></tr><tr><td data-num="15"></td><td><pre>    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="16"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr></table></figure><p>但是如果事件太多，那么代码就会太冗长，难以维护，形成了回调地狱</p><p>解决这个问题，我们可以使用 ES6 新增语法 <code>Promise</code></p><h3 id="表单的同步提交默认和异步提交ajax"><a class="卓越科技-" href="#表单的同步提交默认和异步提交ajax">#</a> 表单的同步提交 (默认) 和异步提交 (ajax)</h3><p>表单具有默认的提交行为，默认是同步的，同步表单提交，浏览器会锁死 (转圈儿) 等待服务端的响应结果。表单的同步提交之后，无论服务端响应的是什么，都会直接把响应的结果覆盖掉当前页面。</p><p>后来有人想到了一种办法，来解决这个问题。即提交表达后在服务器重定位到相同的页面，通过模板引擎将要提示的信息渲染到页面上 (现在仍有网站使用这种方式)</p><p>再后来出现了 ajax，实现不用刷新页面也能获取服务器发送的数据的效果</p><h3 id="node中babel转码器的部署"><a class="卓越科技-" href="#node中babel转码器的部署">#</a> Node 中 Babel 转码器的部署</h3><p>虽然现在浏览器对 ES6 的支持性普遍很好，但是考虑到一些旧版浏览器用户以及我们可能会想通过 es6 模块语法实现模块化开发，所以我们需要 babel 转码器将我们写的 es6 代码转为浏览器普遍支持的代码以便于开发和上线</p><h4 id="部署babel的第一步"><a class="卓越科技-" href="#部署babel的第一步">#</a> 部署 Babel 的第一步</h4><p>Babel 的配置文件是 <code>.babelrc</code> ，存放在项目的根目录下。使用 Babel 的第一步，就是配置这个文件。</p><p>该文件用来设置转码规则和插件，基本格式如下:</p><pre><code>&#123;    
    &quot;present&quot;:[    
        &quot;@babel/env&quot;,     
        &quot;@babel/preset-react&quot;  
    ],   
    &quot;plugins&quot;:[]
&#125;
</code></pre><p>其中 <code>present字段</code> 设定转码规则，可以通过以下代码下载转码规则:</p><figure class="highlight bash"><figcaption data-lang="bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">## 最新转码规则</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token function">npm</span> <span class="token function">install</span> --save-dev @babel/preset-env </pre></td></tr><tr><td data-num="3"></td><td><pre></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token comment">## react 转码规则 </span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token function">npm</span> <span class="token function">install</span> --save-dev @babel/preset-react</pre></td></tr></table></figure><p><code>dev的含义</code> ：代表这个包是开发临时使用，保存到 <code>package.json</code> 文件中的 <code>devDependencies</code> 选项中。</p><p>注意: <code>.babelrc</code> 文件的配置必不可少</p><h4 id="babelregitser模块"><a class="卓越科技-" href="#babelregitser模块">#</a> @babel/regitser 模块</h4><p>开发的过程中，需要不断的调试，为了方便，我们需要能实时转码的工具，即每次调用都不需要一个文件一个文件的转码，可以用 <code>@babel/regitser</code> 模块</p><p>使用方法:</p><ol><li><p>先安装该模块</p><figure class="highlight bash"><figcaption data-lang="bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token function">npm</span> <span class="token function">install</span> --save-dev @babel/register</pre></td></tr></table></figure></li><li><p>设立一个入口文件，该文件用于载入 <code>babel/register</code> 模块并将其中 require 的 js 文件进行实时转码</p><figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">// index.js </span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'@babel/register'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> </pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./es6.js'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr></table></figure><p>注意：必须 <code>先引入模块</code> 再 <code>引入要实时转码的文件</code></p></li><li><p>每当调试时，运行该入口文件即可</p><figure class="highlight bash"><figcaption data-lang="bash"></figcaption><table><tr><td data-num="1"></td><td><pre>node index.js</pre></td></tr></table></figure><p>注意：该模块只用适合在开发环境使用，用于开发调试时将源代码转换。因为是实时的，如果用于上线后，会影响网站性能</p></li></ol><h4 id="babelcli"><a class="卓越科技-" href="#babelcli">#</a> @babel/cli</h4><p>当完成开发后，我们需要将写好的代码完全转码成新的文件用于线上环境， <code>babel/cli</code> 工具可以帮助完成。</p><p>这个模块用于命令行中转码使用，可以 <code>将js文件代码转码输出到命令行中</code> 也可以 <code>转码输出到新的文件里</code> ，还可以 <code>转码整个目录的文件到另一个目录</code></p><p>使用方法:</p><ol><li><p>安装</p><figure class="highlight bash"><figcaption data-lang="bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token function">npm</span> <span class="token function">install</span> --save-dev @babel/cli</pre></td></tr></table></figure></li><li><p>使用</p><figure class="highlight bash"><figcaption data-lang="bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">## 转码结果输出到标准输出 </span></pre></td></tr><tr><td data-num="2"></td><td><pre>npx babel example.js </pre></td></tr><tr><td data-num="3"></td><td><pre></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token comment">## 转码结果写入一个文件 </span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token comment">## --out-file 或 -o 参数指定输出文件 </span></pre></td></tr><tr><td data-num="6"></td><td><pre>npx babel example.js --out-file compiled.js </pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token comment">## 或者 </span></pre></td></tr><tr><td data-num="8"></td><td><pre>npx babel example.js -o compiled.js </pre></td></tr><tr><td data-num="9"></td><td><pre></pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token comment">## 整个目录转码 </span></pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token comment">## --out-dir 或 -d 参数指定输出目录 </span></pre></td></tr><tr><td data-num="12"></td><td><pre>npx babel src --out-dir lib </pre></td></tr><tr><td data-num="13"></td><td><pre><span class="token comment">## 或者 </span></pre></td></tr><tr><td data-num="14"></td><td><pre>npx babel src -d lib</pre></td></tr></table></figure><p>所以可以使用 <code>babel src -d lib</code> 将 src 目录下的代码转码生成同名文件并放到 lib 文件夹中。</p><p>注意: src 是我们开发时写的代码，有 es6 语法。lib 是上线时使用的代码，无 es6 语法</p></li></ol><h4 id="packagejson文件中script字段用法"><a class="卓越科技-" href="#packagejson文件中script字段用法">#</a> packagejson 文件中 script 字段用法</h4><figure class="highlight json"><figcaption data-lang="JSON"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token punctuation">&#123;</span>  </pre></td></tr><tr><td data-num="2"></td><td><pre>    <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"babel-demo"</span><span class="token punctuation">,</span>  </pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token property">"scripts"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>   </pre></td></tr><tr><td data-num="4"></td><td><pre>        <span class="token property">"test"</span><span class="token operator">:</span> <span class="token string">"echo \"Error: no test specified\" &amp;&amp; exit 1"</span><span class="token punctuation">,</span>  </pre></td></tr><tr><td data-num="5"></td><td><pre>        <span class="token property">"build"</span><span class="token operator">:</span> <span class="token string">"babel demo1.js"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="6"></td><td><pre>        <span class="token property">"dev"</span><span class="token operator">:</span> <span class="token string">"node main.js"</span><span class="token punctuation">,</span> </pre></td></tr><tr><td data-num="7"></td><td><pre>        <span class="token property">"prestart"</span><span class="token operator">:</span> <span class="token string">"npm run build"</span><span class="token punctuation">,</span>   </pre></td></tr><tr><td data-num="8"></td><td><pre>        <span class="token property">"start"</span><span class="token operator">:</span> <span class="token string">"node dist/app.js"</span>  </pre></td></tr><tr><td data-num="9"></td><td><pre>    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>  </pre></td></tr><tr><td data-num="10"></td><td><pre>    <span class="token property">"devDependencies"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>  </pre></td></tr><tr><td data-num="11"></td><td><pre>        <span class="token property">"babel-cli"</span><span class="token operator">:</span> <span class="token string">"^6.22.2"</span><span class="token punctuation">,</span>   </pre></td></tr><tr><td data-num="12"></td><td><pre>        <span class="token property">"babel-preset-es2015"</span><span class="token operator">:</span> <span class="token string">"^6.22.0"</span><span class="token punctuation">,</span>  </pre></td></tr><tr><td data-num="13"></td><td><pre>        <span class="token property">"babel-preset-react"</span><span class="token operator">:</span> <span class="token string">"^6.22.0"</span> </pre></td></tr><tr><td data-num="14"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="15"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><p><code>script字段</code> 用于设置快捷命令执行，即可以通过指定的新命令来执行某些命令</p><pre><code>script:&#123;   
	命令名: &quot;被代替的命令&quot;
&#125;
</code></pre><p>命令名可以随意起 ( <code>除了start和prestart</code> )，执行方式为 <code>npm run 命令名</code></p><p>比如可以将调试时执行入口函数的命令其名为 'dev'</p><pre><code>&quot;build&quot;: &quot;babel demo1.js&quot;，
</code></pre><p><code>start命令</code> 用于执行上线时所使用的入口函数， <code>prestart的命令</code> 会在执行 start 前自动执行，所以可以用来执行 <code>babel/cli</code> 工具先将源代码转为上线时所用代码</p><pre><code>&quot;prestart&quot;: &quot;babel src -d dist&quot;,   
&quot;start&quot;: &quot;node dist/app.js&quot;
</code></pre><p>所以只要将 <code>babel/cli</code> 安装在项目中并且 <code>babel src -d lib</code> 写入 <code>script的prestart字段</code> 就可以保证每次执行 <code>npm run start</code> 前都会被转码</p><h3 id="项目的模块化"><a class="卓越科技-" href="#项目的模块化">#</a> 项目的模块化</h3><ol><li><p><code>dist文件</code> ：用于存放转码后的源代码，用于上线</p></li><li><p><code>src文件</code> ：用于存放开发过程中的源代码，一般还可以根据不同业务分为不同的文件夹，如路由文件夹、中间件文件夹、数据处理函数文件夹、数据库模型文件夹</p></li><li><p><code>views文件夹</code> ：用于存放页面文件，根据页面不同分成多个子文件夹</p></li><li><p><code>public文件夹</code> ：存放公共文件的文件夹，比如图片、css 文件、js 文件等</p></li></ol><h3 id="nvm"><a class="卓越科技-" href="#nvm">#</a> NVM</h3><blockquote><p>(Node Version Management) node 版本管理工具</p></blockquote><ul><li><p><code>nvm list</code> : 查看所有已安装的 node 版本</p></li><li><p><code>nvm install 版本号</code> ：安装指定版本的 node</p></li><li><p><code>nvm use 版本号</code> ：切换到指定版本号</p></li><li><p><code>nvm proxy 代理地址</code> ：配置代理进行下载</p></li></ul><div class="tags"><a href="/tags/%E5%89%8D%E7%AB%AF/" rel="tag"><i class="ic i-tag"></i> 前端</a> <a href="/tags/Nodejs/" rel="tag"><i class="ic i-tag"></i> Nodejs</a></div></div><footer><div class="meta"></div><div class="reward"><button><i class="ic i-heartbeat"></i> 赞赏</button><p>请我喝[茶]~(￣▽￣)~*</p><div id="qr"><div><img data-src="//cdn.jsdelivr.net/gh/zykjofficial/zykjshoka@gh-pages/images/wechatpay.png" alt="卓越科技- 微信支付"><p>微信支付</p></div><div><img data-src="//cdn.jsdelivr.net/gh/zykjofficial/zykjshoka@gh-pages/images/alipay.png" alt="卓越科技- 支付宝"><p>支付宝</p></div></div></div><div id="copyright"><ul><li class="author"><strong>本文作者： </strong>卓越科技- <i class="ic i-at"><em>@</em></i>卓越科技 -</li><li class="link"><strong>本文链接：</strong> <a href="https://shoka.zykjofficial.top/posts/d8fc8ff1/" title="Nodejs 学习">https://shoka.zykjofficial.top/posts/d8fc8ff1/</a></li><li class="license"><strong>版权声明： </strong>本站所有文章除特别声明外，均采用 <span class="exturl" data-url="aHR0cHM6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL2xpY2Vuc2VzL2J5LW5jLXNhLzQuMC9kZWVkLnpo"><i class="ic i-creative-commons"><em>(CC)</em></i>BY-NC-SA</span> 许可协议。转载请注明出处！</li></ul></div></footer></article></div><div class="nav"><div class="item left"><a href="/posts/c747b178/" itemprop="url" rel="prev" data-background-image="https:&#x2F;&#x2F;cdn.jsdelivr.net&#x2F;gh&#x2F;zykjofficial&#x2F;zykjimg&#x2F;img&#x2F;ajaxstudy-cover.png" title="AJAX学习"><span class="type">上一篇</span> <span class="category"><i class="ic i-flag"></i> Web 教程</span><h3>AJAX学习</h3></a></div><div class="item right"><a href="/posts/5650a45b/" itemprop="url" rel="next" data-background-image="https:&#x2F;&#x2F;cdn.jsdelivr.net&#x2F;gh&#x2F;zykjofficial&#x2F;zykjimg&#x2F;anime&#x2F;Wallpaper01.png" title="Axios学习"><span class="type">下一篇</span> <span class="category"><i class="ic i-flag"></i> Web 教程</span><h3>Axios学习</h3></a></div></div></div><div id="sidebar"><div class="inner"><div class="panels"><div class="inner"><div class="contents panel pjax" data-title="文章目录"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#nodejs%E5%AD%A6%E4%B9%A0"><span class="toc-number">1.</span> <span class="toc-text">Nodejs 学习</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#nodejs"><span class="toc-number">1.1.</span> <span class="toc-text">Nodejs</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BB%80%E4%B9%88%E6%98%AFnodejs"><span class="toc-number">1.1.1.</span> <span class="toc-text">什么是 Node.js</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#nodejs%E5%8F%AF%E4%BB%A5%E5%81%9A%E4%BB%80%E4%B9%88"><span class="toc-number">1.1.2.</span> <span class="toc-text">Node.js 可以做什么</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#npm"><span class="toc-number">1.1.3.</span> <span class="toc-text">npm</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%A6%82%E4%BD%95%E5%88%A9%E7%94%A8nodejs%E8%A7%A3%E6%9E%90js%E6%96%87%E4%BB%B6"><span class="toc-number">1.1.4.</span> <span class="toc-text">如何利用 Node.js 解析 js 文件</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8E%9F%E7%94%9Fnodejs"><span class="toc-number">1.2.</span> <span class="toc-text">原生 Node.js</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#nodejs%E4%B8%AD%E7%9A%84javascript"><span class="toc-number">1.2.1.</span> <span class="toc-text">Node.js 中的 JavaScript</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%A8%A1%E5%9D%97%E7%9A%84%E5%8A%A0%E8%BD%BD"><span class="toc-number">1.2.1.1.</span> <span class="toc-text">模块的加载</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%88%A9%E7%94%A8require%E5%BC%95%E7%94%A8%E5%85%B6%E4%BB%96js%E6%96%87%E4%BB%B6%E4%B8%AD%E7%9A%84%E5%8F%98%E9%87%8F%E5%87%BD%E6%95%B0"><span class="toc-number">1.2.1.2.</span> <span class="toc-text">利用 require 引用其他 js 文件中的变量函数</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%A8%A1%E5%9D%97%E7%9A%84%E5%8A%A0%E8%BD%BD%E9%A1%BA%E5%BA%8F"><span class="toc-number">1.2.1.3.</span> <span class="toc-text">模块的加载顺序</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%B8%89%E7%A7%8D%E6%A8%A1%E5%9D%97%E7%9A%84%E5%8A%A0%E8%BD%BD%E5%8E%9F%E7%90%86"><span class="toc-number">1.2.1.4.</span> <span class="toc-text">三种模块的加载原理</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#fs%E6%96%87%E4%BB%B6%E6%93%8D%E4%BD%9C%E6%A8%A1%E5%9D%97"><span class="toc-number">1.2.2.</span> <span class="toc-text">fs 文件操作模块</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E8%AF%BB%E5%8F%96%E6%96%87%E4%BB%B6"><span class="toc-number">1.2.2.1.</span> <span class="toc-text">读取文件</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%86%99%E5%85%A5%E6%96%87%E4%BB%B6"><span class="toc-number">1.2.2.2.</span> <span class="toc-text">写入文件</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E8%BF%BD%E5%8A%A0%E6%96%87%E4%BB%B6"><span class="toc-number">1.2.2.3.</span> <span class="toc-text">追加文件</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%88%A0%E9%99%A4%E6%96%87%E4%BB%B6"><span class="toc-number">1.2.2.4.</span> <span class="toc-text">删除文件</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E8%AF%BB%E5%8F%96%E6%96%87%E4%BB%B6%E5%88%97%E8%A1%A8"><span class="toc-number">1.2.2.5.</span> <span class="toc-text">读取文件列表</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#http%E6%A8%A1%E5%9D%97"><span class="toc-number">1.2.3.</span> <span class="toc-text">Http 模块</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%AD%A5%E9%AA%A4"><span class="toc-number">1.2.3.1.</span> <span class="toc-text">步骤</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#http%E7%9A%84%E9%87%8D%E5%AE%9A%E5%90%91"><span class="toc-number">1.2.3.2.</span> <span class="toc-text">http 的重定向</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#url%E6%A8%A1%E5%9D%97"><span class="toc-number">1.2.4.</span> <span class="toc-text">URL 模块</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%8A%A0%E8%BD%BD%E6%A8%A1%E5%9D%97"><span class="toc-number">1.2.4.1.</span> <span class="toc-text">加载模块</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E8%A7%A3%E6%9E%90%E5%9C%B0%E5%9D%80%E6%96%B9%E6%B3%95"><span class="toc-number">1.2.4.2.</span> <span class="toc-text">解析地址方法</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#path%E6%A8%A1%E5%9D%97"><span class="toc-number">1.2.5.</span> <span class="toc-text">Path 模块</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%8A%A0%E8%BD%BD%E6%96%B9%E5%BC%8F"><span class="toc-number">1.2.5.1.</span> <span class="toc-text">加载方式</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%A8%A1%E5%9D%97%E6%96%B9%E6%B3%95"><span class="toc-number">1.2.5.2.</span> <span class="toc-text">模块方法</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#node%E4%B8%AD%E7%9A%84dirname%E5%92%8C__filename"><span class="toc-number">1.2.6.</span> <span class="toc-text">Node 中的 dirname 和 __filename</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#art-template%E6%A8%A1%E6%9D%BF%E5%BC%95%E6%93%8E%E6%A8%A1%E5%9D%97"><span class="toc-number">1.2.7.</span> <span class="toc-text">art-template 模板引擎模块</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#formidable%E6%A8%A1%E5%9D%97%E5%AE%9E%E7%8E%B0%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0"><span class="toc-number">1.2.8.</span> <span class="toc-text">formidable 模块实现文件上传</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%B8%B2%E6%9F%93%E6%95%B0%E6%8D%AE%E5%92%8C%E6%9C%8D%E5%8A%A1%E7%AB%AF%E6%B8%B2%E6%9F%93%E6%95%B0%E6%8D%AE%E7%9A%84%E5%8C%BA%E5%88%AB"><span class="toc-number">1.2.9.</span> <span class="toc-text">客户端渲染数据和服务端渲染数据的区别</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#replread-eval-print-loop"><span class="toc-number">1.3.</span> <span class="toc-text">REPL(read eval print loop)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#express%E6%A1%86%E6%9E%B6%E7%9A%84%E4%BD%BF%E7%94%A8"><span class="toc-number">1.4.</span> <span class="toc-text">Express 框架的使用</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#express%E7%9A%84%E4%B8%AD%E9%97%B4%E4%BB%B6%E6%A6%82%E5%BF%B5"><span class="toc-number">1.4.1.</span> <span class="toc-text">express 的中间件概念</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#express%E5%BF%AB%E9%80%9F%E5%A4%84%E7%90%86%E9%9D%99%E6%80%81%E8%B5%84%E6%BA%90%E4%BD%BF%E7%94%A8expressstatic%E4%B8%AD%E9%97%B4%E4%BB%B6"><span class="toc-number">1.4.2.</span> <span class="toc-text">express 快速处理静态资源 (使用 express.static 中间件)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#express%E4%B8%AD%E6%A8%A1%E6%9D%BF%E5%BC%95%E6%93%8E%E7%9A%84%E4%BD%BF%E7%94%A8"><span class="toc-number">1.4.3.</span> <span class="toc-text">express 中模板引擎的使用</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#express%E4%B8%AD%E7%9A%84%E9%87%8D%E5%AE%9A%E5%90%91"><span class="toc-number">1.4.4.</span> <span class="toc-text">express 中的重定向</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#express%E4%B8%AD%E7%9A%84%E5%8F%91%E9%80%81%E6%96%87%E4%BB%B6"><span class="toc-number">1.4.5.</span> <span class="toc-text">express 中的发送文件</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#express%E4%B8%AD%E8%AF%BB%E5%8F%96post%E4%B8%BB%E4%BD%93reqquery%E5%8F%AA%E8%83%BD%E8%8E%B7%E5%8F%96get%E6%96%B9%E5%BC%8F%E7%9A%84%E6%95%B0%E6%8D%AE"><span class="toc-number">1.4.6.</span> <span class="toc-text">express 中读取 post 主体 (req.query 只能获取 get 方式的数据)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#express%E4%B8%AD%E7%9A%84router%E4%B8%AD%E9%97%B4%E4%BB%B6"><span class="toc-number">1.4.7.</span> <span class="toc-text">express 中的 router 中间件</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#express%E4%B8%AD%E7%9A%84session%E4%B8%AD%E9%97%B4%E4%BB%B6"><span class="toc-number">1.4.8.</span> <span class="toc-text">express 中的 session 中间件</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8F%92%E4%BB%B6%E8%AF%B4%E6%98%8E"><span class="toc-number">1.5.</span> <span class="toc-text">插件说明</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#node%E4%B8%AD%E4%BD%BF%E7%94%A8mongodb%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="toc-number">1.6.</span> <span class="toc-text">Node 中使用 MongoDB 数据库</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#mongodb%E7%9A%84%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84"><span class="toc-number">1.6.1.</span> <span class="toc-text">MongoDB 的数据结构</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E9%9B%86%E5%90%88"><span class="toc-number">1.6.2.</span> <span class="toc-text">创建集合</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E6%93%8D%E4%BD%9C"><span class="toc-number">1.6.3.</span> <span class="toc-text">数据操作</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%85%B3%E4%BA%8E%E5%BC%82%E6%AD%A5%E7%BC%96%E7%A8%8B%E5%9B%9E%E8%B0%83%E5%9C%B0%E7%8B%B1-promise"><span class="toc-number">1.6.4.</span> <span class="toc-text">关于异步编程 (回调地狱、promise)</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%A1%A8%E5%8D%95%E7%9A%84%E5%90%8C%E6%AD%A5%E6%8F%90%E4%BA%A4%E9%BB%98%E8%AE%A4%E5%92%8C%E5%BC%82%E6%AD%A5%E6%8F%90%E4%BA%A4ajax"><span class="toc-number">1.7.</span> <span class="toc-text">表单的同步提交 (默认) 和异步提交 (ajax)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#node%E4%B8%ADbabel%E8%BD%AC%E7%A0%81%E5%99%A8%E7%9A%84%E9%83%A8%E7%BD%B2"><span class="toc-number">1.8.</span> <span class="toc-text">Node 中 Babel 转码器的部署</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%83%A8%E7%BD%B2babel%E7%9A%84%E7%AC%AC%E4%B8%80%E6%AD%A5"><span class="toc-number">1.8.1.</span> <span class="toc-text">部署 Babel 的第一步</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#babelregitser%E6%A8%A1%E5%9D%97"><span class="toc-number">1.8.2.</span> <span class="toc-text">@babel&#x2F;regitser 模块</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#babelcli"><span class="toc-number">1.8.3.</span> <span class="toc-text">@babel&#x2F;cli</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#packagejson%E6%96%87%E4%BB%B6%E4%B8%ADscript%E5%AD%97%E6%AE%B5%E7%94%A8%E6%B3%95"><span class="toc-number">1.8.4.</span> <span class="toc-text">packagejson 文件中 script 字段用法</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%A1%B9%E7%9B%AE%E7%9A%84%E6%A8%A1%E5%9D%97%E5%8C%96"><span class="toc-number">1.9.</span> <span class="toc-text">项目的模块化</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#nvm"><span class="toc-number">1.10.</span> <span class="toc-text">NVM</span></a></li></ol></li></ol></div><div class="related panel pjax" data-title="系列文章"><ul><li><a href="/posts/c747b178/" rel="bookmark" title="AJAX学习">AJAX学习</a></li><li><a href="/posts/5650a45b/" rel="bookmark" title="Axios学习">Axios学习</a></li><li><a href="/posts/238675c9/" rel="bookmark" title="CSS学习">CSS学习</a></li><li><a href="/posts/9b6eaec3/" rel="bookmark" title="HTML学习">HTML学习</a></li><li><a href="/posts/d3a7443d/" rel="bookmark" title="JavaScript学习">JavaScript学习</a></li><li><a href="/posts/8cde864d/" rel="bookmark" title="JavaScript高级">JavaScript高级</a></li><li class="active"><a href="/posts/d8fc8ff1/" rel="bookmark" title="Nodejs学习">Nodejs学习</a></li><li><a href="/posts/7a95906a/" rel="bookmark" title="jQuery学习">jQuery学习</a></li></ul></div><div class="overview panel" data-title="站点概览"><div class="author" itemprop="author" itemscope itemtype="http://schema.org/Person"><img class="image" itemprop="image" alt="卓越科技-" data-src="//cdn.jsdelivr.net/gh/zykjofficial/zykjshoka@gh-pages/images/avatar.jpg"><p class="name" itemprop="name">卓越科技-</p><div class="description" itemprop="description">Remarkable life,for science and technology.</div></div><nav class="state"><div class="item posts"><a href="/archives/"><span class="count">9</span> <span class="name">文章</span></a></div><div class="item categories"><a href="/categories/"><span class="count">2</span> <span class="name">分类</span></a></div><div class="item tags"><a href="/tags/"><span class="count">11</span> <span class="name">标签</span></a></div></nav><div class="social"><span class="exturl item github" data-url="aHR0cHM6Ly9naXRodWIuY29tL3p5a2pvZmZpY2lhbA==" title="https:&#x2F;&#x2F;github.com&#x2F;zykjofficial"><i class="ic i-github"></i></span> <span class="exturl item music" data-url="aHR0cHM6Ly9tdXNpYy4xNjMuY29tLyMvdXNlci9ob21lP2lkPTQwMDc0NjM0NQ==" title="https:&#x2F;&#x2F;music.163.com&#x2F;#&#x2F;user&#x2F;home?id&#x3D;400746345"><i class="ic i-cloud-music"></i></span> <span class="exturl item weibo" data-url="aHR0cHM6Ly93ZWliby5jb20vNjU4ODI0NDM4NQ==" title="https:&#x2F;&#x2F;weibo.com&#x2F;6588244385"><i class="ic i-weibo"></i></span> <a href="/about/" title="&#x2F;about&#x2F;" class="item about"><i class="ic i-address-card"></i></a> <span class="exturl item email" data-url="bWFpbHRvOnNoaWtvbmd4aWFvbXlzQGdtYWlsLmNvbQ==" title="mailto:shikongxiaomys@gmail.com"><i class="ic i-envelope"></i></span></div><ul class="menu"><li class="item"><a href="/" rel="section"><i class="ic i-home"></i>首页</a></li><li class="item dropdown"><a href="javascript:void(0);"><i class="ic i-feather"></i>文章</a><ul class="submenu"><li class="item"><a href="/archives/" rel="section"><i class="ic i-list-alt"></i>归档</a></li><li class="item"><a href="/categories/" rel="section"><i class="ic i-th"></i>分类</a></li><li class="item"><a href="/tags/" rel="section"><i class="ic i-tags"></i>标签</a></li></ul></li><li class="item"><a href="/link/" rel="section"><i class="ic i-heart"></i>友達</a></li><li class="item"><a href="/about/" rel="section"><i class="ic i-user"></i>关于</a></li></ul></div></div></div><ul id="quick"><li class="prev pjax"><a href="/posts/c747b178/" rel="prev" title="上一篇"><i class="ic i-chevron-left"></i></a></li><li class="up"><i class="ic i-arrow-up"></i></li><li class="down"><i class="ic i-arrow-down"></i></li><li class="next pjax"><a href="/posts/5650a45b/" rel="next" title="下一篇"><i class="ic i-chevron-right"></i></a></li><li class="percent"></li></ul></div></div><div class="dimmer"></div></div></main><footer id="footer"><div class="inner"><div class="widgets"></div><div class="status"><div class="copyright">&copy; <span itemprop="copyrightYear">2020</span> <span class="with-love"><i class="ic i-sakura rotate"></i> </span><span class="author" itemprop="copyrightHolder">卓越科技- @ 卓越科技的学习站</span></div><div class="count"><span class="post-meta-item-icon"><i class="ic i-chart-area"></i> </span><span title="站点总字数">196k 字</span> <span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="ic i-coffee"></i> </span><span title="站点阅读时长">2:58</span></div><div class="powered-by">基于 <span class="exturl" data-url="aHR0cHM6Ly9oZXhvLmlv">Hexo</span> & Theme.<span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2FtZWhpbWUvaGV4by10aGVtZS1zaG9rYQ==">Shoka</span></div></div></div></footer></div><script data-config type="text/javascript">var LOCAL={path:"posts/d8fc8ff1/",favicon:{show:"（●´3｀●）やれやれだぜ",hide:"(´Д｀)大変だ！"},search:{placeholder:"文章搜索",empty:"关于 「 ${query} 」，什么也没搜到",stats:"${time} ms 内找到 ${hits} 条结果"},fancybox:!0,copyright:'复制成功，转载请遵守 <i class="ic i-creative-commons"></i>BY-NC-SA 协议。',ignores:[function(e){return e.includes("#")},function(e){return new RegExp(LOCAL.path+"$").test(e)}]}</script><script src="//cdn.jsdelivr.net/combine/npm/pace-js@1.0.2/pace.min.js,npm/pjax@0.2.8/pjax.min.js,npm/whatwg-fetch@3.4.0/dist/fetch.umd.min.js,npm/animejs@3.2.0/lib/anime.min.js,npm/algoliasearch@4/dist/algoliasearch-lite.umd.js,npm/instantsearch.js@4/dist/instantsearch.production.min.js,npm/lozad@1/dist/lozad.min.js,npm/quicklink@2/dist/quicklink.umd.js"></script><script src="//cdn.jsdelivr.net/gh/zykjofficial/zykjshoka@gh-pages/js/app.js?v=0.2.2"></script></body></html><!-- rebuild by hrmmi -->